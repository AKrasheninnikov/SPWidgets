(function(d){var u=d;document.head||(document.head=document.getElementsByTagName("head")[0]);(function(){try{d.pt||(d.pt={})}catch(b){d.pt={}}void 0===d.pt._cache&&(d.pt._cache={});d.SPWidgets={};d.SPWidgets.version="20130721060236";d.SPWidgets.defaults={};d.fn.SPMsgHasError=function(){var b=d(this).find("ErrorCode"),c=!1;if(!b.length)return d(this).find("faultcode").length?!0:!1;b.each(function(){if("0x00000000"!==d(this).text())return c=!0,!1});return c};d.fn.SPGetMsgError=function(){var b=
d(this),c="",f=b.find("ErrorCode"),g=0;f.length||(f=b.find("faultcode"));if(!f.length)return"";f.each(function(){var b=d(this);"0x00000000"!==b.text()&&(g+=1,c+="("+g+") "+b.text()+": "+b.parent().children().not(b).text()+"\n")});return c=g+" error(s) encountered! \n"+c};d.SPWidgets.fillTemplate=function(b,c){var f,g,a,k,e,l,n,q;f="";g=String(d("<div/>").append(b).html());a=g.match(/(\{\{.*?\}\})/g);d.isArray(c)||(c=[c]);if(null!==a)for(l=0,n=c.length;l<n;l++){q=g;k=0;for(e=a.length;k<e;k++)a[k]=
a[k].replace(/[\{\{\}\}]/g,""),q=q.replace("{{"+a[k]+"}}",c[l][a[k]]);f+=q}return f};d.SPWidgets.parseLookupFieldValue=function(b){var c=[],f=String(b).split(";#"),g=f.length,a,d;if(void 0===b)return c;for(b=0;b<g;b++)a=f[b],b++,d=f[b],(a||d)&&c.push({id:a,title:d});return c};d.SPWidgets.getCamlLogical=function(b){b=d.extend({},{type:"AND",values:[],onEachValue:null},b);var c="<And>",f="</And>",g="",a=0,k=0,e=!1;b.type=String(b.type).toUpperCase();d.isArray(b.values)||(b.values=[b.values]);"AND"!==
b.type&&(c="<Or>",f="</Or>");g=c;a=b.values.length;k=a-1;e=d.isFunction(b.onEachValue);2>a&&(g="");for(c=0;c<a;c++)if(g=e?g+String(b.onEachValue(b.values[c])).toString():g+String(b.values[c]).toString(),1<k-c){g+=d.SPWidgets.getCamlLogical(d.extend({},b,{values:b.values.slice(c+1,a-c)}));break}1<a&&(g+=f);return g};d.SPWidgets.SPGetDateString=function(b,c){function f(b){return 10>b?"0"+b:b}c=String(c||"local").toLowerCase();b=b||new Date;var g="";return g="utc"===c?b.getUTCFullYear()+"-"+f(b.getUTCMonth()+
1)+"-"+f(b.getUTCDate())+"T"+f(b.getUTCHours())+":"+f(b.getUTCMinutes())+":"+f(b.getUTCSeconds())+"Z":b.getFullYear()+"-"+f(b.getMonth()+1)+"-"+f(b.getDate())+"T"+f(b.getHours())+":"+f(b.getMinutes())+":"+f(b.getSeconds())};d.SPWidgets.makeSameHeight=function(b,c){var f=0,g=d(b);g.each(function(){var b=d(this).css("height","");f<b.outerHeight(!0)&&(f=b.outerHeight(!0))});0<f&&(c&&(f+=c),g.height(f));return b};d.SPWidgets.escapeXML=function(b){return"string"!==typeof b?"":b.replace(/&/g,"&amp;").replace(/</g,
"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;")};d.SPWidgets.unEscapeXML=function(b){return"string"!==typeof b?"":b.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"')};d.SPWidgets.getRuntimeInfo=function(){function b(){this.SPWidgets=d.SPWidgets.version;this.jQuery=d.fn.jquery||"?";this.SPServices=this.jQueryUICss=this.jQueryUI="?";return this}b.prototype.asString=function(){var b="",a;for(a in this)this.hasOwnProperty(a)&&
(b+="[ "+a+" = "+this[a]+" ] ");return b};var c=new b,f=d("<div/>"),g="";try{c.jQueryUI=u.ui.version}catch(a){}try{c.SPServices=d().SPServices.Version,c.SPServices&&d().SPServices&&(c.SPServices="loaded")}catch(k){}g=f.css("background-image");f.addClass("ui-widget-header");f.css("background-image")!==g&&(c.jQueryUICss="loaded");return c}})(u);(function(b){var d={initDone:!1,maxColumns:20};b.SPWidgets.defaults.board={list:"",field:"",CAMLQuery:"<Query></Query>",CAMLViewFields:"",fieldFilter:null,optionalLabel:"(none)",
template:null,webURL:b().SPServices.SPGetCurrentSite(),showColPicker:!1,colPickerLabel:"Columns",colPickerVisible:[],colPickerCloseLabel:"Close",colPickerApplyLabel:"Apply",colPickerCheckLabel:"Check-Uncheck All",colPickerTotalLabel:"Selected.",colPickerMaxColMsg:"Can not exceed 10 columns!",colPickerMinColMsg:"Mininum of 2 required!",onGetListItems:null,onPreUpdate:null,onBoardCreate:null};b.fn.SPShowBoard=function(c){d.initDone||(d.initDone=!0,""!==d.styleSheet&&b('<style type="text/css">\n\n'+
d.styleSheet+"\n\n</style>").prependTo("head"));var f=arguments;return this.each(function(){var g=b(this),a="string"===typeof c,k=g.hasClass("hasSPShowBoard"),e=null,l="",n=null;if(k&&!a)return this;if(a&&k&&!g.hasClass("loadingSPShowBoard"))return l=c.toLowerCase(),n=g.data("SPShowBoardOptions"),"refresh"===l?n._getListItems().then(function(){n.showItemsOnBoard({refresh:!0})}):"redraw"===l?n.setBoardColumnHeight():"setvisible"===l&&n.showColPicker&&n.setUserDefinedVisibleCol(f[1]),this;if(g.hasClass("loadingSPShowBoard"))return this;
e=b.extend({},b.SPWidgets.defaults.board,c,{ele:g,states:[],statesMap:{},tmpltHeader:"",tmpltState:"",statesCntr:"",headersCntr:"",listItems:[],initDone:!1,formUrls:null,isStateRequired:!0,maxColumnVisible:10,showNumberOfColumns:10,getBoardStates:function(){return b.Deferred(function(a){b().SPServices({operation:"GetList",listName:e.list,cacheXML:!0,async:!1,webURL:e.webURL,completefunc:function(c,f){var x=b(c.responseXML),r=x.find("Fields Field[StaticName='"+e.field+"']");if(!r.length){r=x.find("Fields Field[DisplayName='"+
e.field+"']");if(!r.length){a.rejectWith(g,["Field ("+e.field+") not found in list definition!",c,f]);return}e._origField=e.field;e.field=r.attr("StaticName")}"FALSE"===r.attr("Required")&&(e.isStateRequired=!1);switch(r.attr("Type").toLowerCase()){case "choice":e.isStateRequired||(e.states.push({type:"choice",title:e.optionalLabel,name:e.optionalLabel}),e.statesMap[""]=e.states[e.states.length-1]);e.fieldFilter&&(e.fieldFilter=e.fieldFilter.split(/\,/));r.find("CHOICES CHOICE").each(function(a,c){var g=
b(this).text();if(!e.fieldFilter||b.grep(e.fieldFilter,function(b){return b===g}).length){if(a>=d.maxColumns){try{console.log("SPWIDGETS:BOARD:Warning: Can only build a max of "+d.maxColumns+" columns!")}catch(f){}return!1}e.states.push({type:"choice",title:g,name:g});e.statesMap[g]=e.states[e.states.length-1]}});a.resolveWith(e,[c,f]);break;case "lookup":e.fieldFilter||(e.fieldFilter="<Query></Query>");b().SPServices({operation:"GetListItems",listName:r.attr("List"),async:!0,cacheXML:!0,CAMLQuery:e.fieldFilter,
webURL:e.webURL,CAMLRowLimit:d.maxColumns,CAMLViewFields:'<ViewFields><FieldRef Name="'+r.attr("ShowField")+'" /></ViewFields>',completefunc:function(c,f){if("error"===f)a.rejectWith(g,["Communications Error!",c,f]);else{var m=b(c.responseXML);m.SPMsgHasError()?a.rejectWith(g,[m.SPGetMsgError(),c,f]):(e.isStateRequired||(e.states.push({type:"lookup",title:e.optionalLabel,name:""}),e.statesMap[""]=e.states[e.states.length-1]),m.SPFilterNode("z:row").each(function(a,c){if(a>=d.maxColumns){try{console.log("SPWIDGETS:BOARD:Warning: Can only build a max of "+
d.maxColumns+" columns!")}catch(g){}return!1}var f=b(this),q=f.attr("ows_ID"),f=f.attr("ows_"+r.attr("ShowField")),q=q+";#"+f;e.states.push({type:"lookup",title:f,name:q});e.statesMap[q]=e.states[e.states.length-1]}),a.resolveWith(e,[c,f]))}}});break;default:a.rejectWith(g,["Field ("+e.field+") Type ("+r.attr("Type")+") is not supported!",c,f])}}})}).promise()},_getListItems:function(){return b.Deferred(function(a){function f(c){b.isFunction(e.onGetListItems)&&e.onGetListItems.call(g,e.listItems,
c);a.resolveWith(g,[e.listItems])}b.isFunction(e.CAMLQuery)?e.CAMLQuery.call(g,function(a){b.isArray(a)&&(e.listItems=a,f(e.CAMLQuery))},c):b().SPServices({operation:"GetListItems",listName:e.list,async:!0,CAMLQuery:e.CAMLQuery,CAMLRowLimit:0,CAMLViewFields:e.CAMLViewFields,webURL:e.webURL,completefunc:function(c,d){if("error"===d)a.rejectWith(g,["Communications Error!",c,d]);else{var h=b(c.responseXML);h.SPMsgHasError()?a.rejectWith(g,[h.SPGetMsgError(),c,d]):(e.listItems=h.SPFilterNode("z:row").SPXmlToJson({includeAllAttrs:!0}),
f(h))}}})}).promise()},getBoardItemDataObject:function(a){var c=null,f,g,d;if(a)for(a=String(a),f=0,g=e.listItems.length;f<g;f++)d=e.listItems[f].ID,b.isFunction(d)&&(d=e.listItems[f].ID()),d=String(d),a===d&&(c=e.listItems[f],f=g+g);return c},showItemsOnBoard:function(a){function c(a,d){var h="",q=null,m="";b.isFunction(e.template)?(h=e.template.call(g,a,d))&&(h=String(h)):h=b.SPWidgets.fillTemplate(e.template,s);void 0!==d&&""!==h?d.html(h):""!==h&&(q=a.ID,b.isFunction(a.ID)&&(q=a.ID()),void 0===
l[n]&&(l[n]=""),e.initDone&&f.refresh&&(m+=" spwidget-temp"),l[n]+='<div class="spwidget-board-state-item ui-state-default ui-corner-all'+m+'" data-id="'+q+'">'+h+"</div>");return h}var f=b.extend({},{rows:e.listItems,refresh:!1,doBoardInsert:!0},a);a=[];var d=[],h=[],l={},k=null,n=null,p=k=null,s=null,w;if(!f.refresh)for(p=0,w=e.states.length;p<w;p++)e.states[p].headerTotalEle.html("0"),e.states[p].dataEle.empty();p=0;for(w=f.rows.length;p<w;p++)s=f.rows[p],n=s[e.field]||"",k=s.ID,b.isFunction(n)&&
(n=s[e.field]()),b.isFunction(k)&&(k=k()),e.statesMap[n]&&(!1===f.refresh?(e.initDone&&a.push(s),c(s)):(k=e.statesCntr.find("div[data-id='"+k+"']"),k.length?(k.addClass("spwidget-temp"),k.closest("div.spwidget-board-state").data("boardstate")!==n&&(k.appendTo(e.statesMap[n].dataEle),h.push(s)),c(s,k)):(e.initDone&&a.push(s),c(s))));if(f.doBoardInsert){for(p in l)l.hasOwnProperty(p)&&""!==l[p]&&e.statesMap[p].dataEle.append(l[p]);e.updBoardHeaders();b.pt.addHoverEffect(g.find(".spwidget-board-state-item"))}e.initDone&&
f.refresh&&e.statesCntr.find("div.spwidget-board-state-item").not("div.spwidget-temp").each(function(){d.push(e.getBoardItemDataObject(b(this).data("id")));b(this).remove()}).end().removeClass("spwidget-temp");e.initDone&&(e.statesCntr.find("div.spwidget-board-state").sortable("refresh").end().disableSelection(),e.setBoardColumnHeight(),p=e.getEventObject(),a.length&&(p.itemsModified.length=0,p.itemsModified.push(a),g.trigger("spwidget:boarditemadd",[g,b.extend({},p)])),d.length&&(p.itemsModified.length=
0,p.itemsModified.push(d),g.trigger("spwidget:boarditemremove",[g,b.extend({},p)])),p.itemsModified.length=0,p.itemsModified.push.apply(p.itemsModified,a),p.itemsModified.push.apply(p.itemsModified,d),p.itemsModified.push.apply(p.itemsModified,h),p.itemsModified.length&&g.trigger("spwidget:boardchange",[g,p]));return l},updBoardHeaders:function(a){var c;if(!b.extend({},{state:null},a).state)for(a=0,c=e.states.length;a<c;a++)e.states[a].headerTotalEle.html(e.states[a].dataEle.children().length)},getEventObject:function(a){a||
(a=e.statesCntr.find("div.spwidget-board-state-item:first"));a=b(a);a={stateTotals:{},itemTotal:0,currentState:a.closest("div.spwidget-board-state").data("boardstate"),itemObj:e.getBoardItemDataObject(a.data("id"))||{},itemsModified:[]};var c,f;c=0;for(f=e.states.length;c<f;c++)a.itemTotal+=a.stateTotals[e.states[c].name]=Number(e.states[c].headerTotalEle.text());return a},getListFormUrl:function(a){function c(){b().SPServices({operation:"GetFormCollection",listName:e.list,webURL:e.webURL,cacheXML:!0,
async:!1,completefunc:function(a,c){b(a.responseXML).find("Form").each(function(){var a=b(this);e.formUrls[String(a.attr("Type")).toLowerCase()]=e.webURL+"/"+a.attr("Url")})}})}a=String(a).toLowerCase();null===e.formUrls&&(e.formUrls={},c());return e.formUrls[a]||""},setBoardColumnClass:function(a){var c=e.headersCntr.add(e.statesCntr);a=parseInt(a);if(!a||2>a)a=0,b.each(e.states,function(b,e){e.isVisible&&a++});if(e.showNumberOfColumns===a)return e;c.addClass("spwidget-states-"+a);e.showNumberOfColumns&&
c.removeClass("spwidget-states-"+e.showNumberOfColumns);e.showNumberOfColumns=a;return e},setupColumnPicker:function(){var a=g.find(".spwidget-board-column-list-cntr"),c=a.find("div.spwidget-board-column-list"),f=a.children("div.ui-state-default:last"),d={$totalCntr:a.find("span.spwidget-board-column-total"),setTotalSelected:function(){var b=d.getSelected().length;d.$totalCntr.html(b);return b},getSelected:function(){return c.find("a.ui-state-highlight")},showMessage:function(a){b('<div class="spwidget-board-msg ui-state-error ui-corner-all">'+
a+"</div>").appendTo(f).fadeOut(8E3,function(){b(this).remove()})},setSelected:function(){var a=c.find("a");b.each(e.states,function(b,e){var c=a.filter("[data-board_col_index='"+b+"']");e.isVisible?d.selectColumn(c,!1):d.selectColumn(c,!0)});d.setTotalSelected()},selectColumn:function(a,e){b(a).each(function(){var a=b(this),c=a.find(".ui-icon");a.hasClass("ui-state-highlight")||e?!1!==e&&(c.removeClass("ui-icon-check"),a.removeClass("ui-state-highlight")):(c.addClass("ui-icon-check"),a.addClass("ui-state-highlight"))});
return a},setVisibleColumns:function(a){a||(a=d.getSelected());var c=a.length;b.each(e.states,function(b,e){a.filter("[data-board_col_index='"+b+"']").length?!1===e.isVisible&&(e.isVisible=!0,e.dataEle.css("display",""),e.headerEle.css("display","")):(e.isVisible=!1,e.dataEle.css("display","none"),e.headerEle.css("display","none"))});e.setBoardColumnClass(c);e.setBoardColumnHeight()}};d.setUserDefinedVisibleCol=e.setUserDefinedVisibleCol=function(a){var f=0,g="";b.isArray(a)&&(b.each(a,function(a,
c){b.each(e.states,function(a,b){if(b.title===c)return f++,1<f&&(g+=","),g+="a[data-board_col_name='"+b.name+"']",!1});if(f>=e.maxColumnVisible)return!1}),2<=f&&(d.setVisibleColumns(c.find(g)),d.triggerEvent()))};d.triggerEvent=function(){var a=[];e.initDone&&(b.each(e.statesMap,function(b,e){e.isVisible&&a.push(e.title)}),e.ele.trigger("spwidget:boardColumnChange",[e.ele,a]))};a.find("button[name='apply']").button({label:e.colPickerApplyLabel,icons:{secondary:"ui-icon-circle-check"}}).on("click",
function(b){b=d.getSelected();var c=b.length;c>e.maxColumnVisible?d.showMessage(e.colPickerMaxColMsg):2>c?d.showMessage(e.colPickerMinColMsg):(a.hide(),d.setVisibleColumns(b),d.triggerEvent())});a.find("button[name='check']").attr("title",e.colPickerCheckLabel).button({text:!1,icons:{primary:"ui-icon-check"}}).on("click",function(a){a=d.getSelected();a.length?d.selectColumn(a,!0):d.selectColumn(c.find("a"));d.setTotalSelected()});a.find("button[name='close']").attr("title",e.colPickerCloseLabel).button({text:!1,
icons:{primary:"ui-icon-circle-close"}}).on("click",function(b){a.hide()});g.find("div.spwidget-board-settings").css("display","").find("div.spwidget-board-settings-columns").each(function(){var c=b(this);c.button({label:e.colPickerLabel,icons:{secondary:"ui-icon-triangle-1-s"}}).on("click.SPWidgets",function(){a.is(":visible")?a.hide():(d.setSelected(),a.show().position({my:"left top",at:"left bottom",of:c}))});return!1});c.each(function(){var a=b(this),c="";b.each(e.states,function(a,b){c+='<a href="javascript:" data-board_col_index="'+
a+'" data-board_col_name="'+b.name+'"><span class="ui-icon ui-icon-minus"></span><span>'+b.title+"</span></a>"});a.html(c);return!1}).on("click","a",function(){d.selectColumn(this);d.setTotalSelected()});a.find("span.spwidget-board-column-total-label").html(e.colPickerTotalLabel);b.isArray(e.colPickerVisible)&&e.colPickerVisible.length&&d.setUserDefinedVisibleCol(e.colPickerVisible)},setBoardColumnHeight:function(){e.statesCntr.is(":visible")&&b.SPWidgets.makeSameHeight(e.statesCntr.find("div.spwidget-board-state:visible"),
20);e.headersCntr.is(":visible")&&b.SPWidgets.makeSameHeight(e.headersCntr.find("div.spwidget-board-state:visible"),0)}});if(!e.list||!e.field)return g.html("<div>SPWidgets:Board [ERROR] Missing required input parameters!</div>"),this;g.addClass("loadingSPShowBoard").data("SPShowBoardOptions",e);e.getBoardStates().then(function(){""===e.CAMLViewFields?e.CAMLViewFields='<ViewFields><FieldRef Name="ID" /><FieldRef Name="Title" /><FieldRef Name="'+e.field+'" /></ViewFields>':0>e.CAMLViewFields.indexOf(e.field)&&
(e.CAMLViewFields=e.CAMLViewFields.replace(/\<\/ViewFields\>/i,'<FieldRef Name="'+e.field+'" /></ViewFields>'));g.html(b(d.htmlTemplate).filter("div.spwidget-board"));e.tmpltHeader=b("<div/>").append(g.find("div.spwidget-board-headers-cntr div.spwidget-board-state").clone()).html();e.tmpltState=b("<div/>").append(g.find("div.spwidget-board-states-cntr div.spwidget-board-state")).html();e.states.length<=e.maxColumnVisible?e.showNumberOfColumns=e.states.length:e.showColPicker=!0;e.statesCntr=g.find("div.spwidget-board-states-cntr").addClass("spwidget-states-"+
e.showNumberOfColumns).empty();e.headersCntr=g.find("div.spwidget-board-headers-cntr").addClass("spwidget-states-"+e.showNumberOfColumns).empty();b.each(e.states,function(a,c){c.headerEle=b(e.tmpltHeader).appendTo(e.headersCntr).attr("data-boardstate",c.name).attr("data-boardindex",a).html(c.title);c.dataEle=b(e.tmpltState).appendTo(e.statesCntr).attr("data-boardindex",a).attr("data-boardstate",c.name);c.headerTotalEle=b('<span>&nbsp;[<span class="spwidget-state-item-total">0</span>]</span>').appendTo(c.headerEle).find("span.spwidget-state-item-total");
c.isVisible=!0;a>e.maxColumnVisible-1&&(c.headerEle.css("display","none"),c.dataEle.css("display","none"),c.isVisible=!1)});b(e.headersCntr,e.statesCntr).append('<div style="clear:both;"></div>');!0===e.showColPicker&&e.setupColumnPicker();g.on("sortreceive sortremove",function(a,c){e.updBoardHeaders();b(c.item).removeClass("ui-state-hover")}).on("sortreceive",function(a,c){var f=e.getEventObject(c.item),d=b.Deferred(),h="",h=b.isFunction(f.itemObj.ID)?f.itemObj.ID():f.itemObj.ID;f.updates=[];f.updatePromise=
d.promise();f.updates.push([e.field,f.currentState]);if(b.isFunction(e.onPreUpdate)&&!0===e.onPreUpdate.call(c.item,a,c.item,f)||!f.updates.length)return this;b().SPServices({operation:"UpdateListItems",listName:e.list,async:!0,ID:h,valuepairs:f.updates,webURL:e.webURL,completefunc:function(e,h){if("error"===h)d.rejectWith(g,["Communications Error!",e,h]);else{var k=b(e.responseXML),l=null;k.SPMsgHasError()?d.rejectWith(g,[k.SPGetMsgError(),e,h]):(l=b(e.responseXML).SPFilterNode("z:row").SPXmlToJson({includeAllAttrs:!0}),
b(a.target).trigger("spwidget:boardchange",[c.item,f]),d.resolveWith(a.target,[l[0],f.itemObj,e]))}}})}).on("click","a.spwidgets-board-action",function(a){a=b(a.currentTarget);var c=String(a.data("spwidgets_board_action")).toLowerCase(),f="",d=b.pt.getEscapedUrl(window.location.href);switch(c){case "edit-item":f=e.getListFormUrl("EditForm");break;case "view-item":f=e.getListFormUrl("DisplayForm")}window.location.href=f+"?ID="+a.data("spwidgets_id")+"&Source="+d;return this});null===e.template&&(e.template=
b(d.htmlTemplate).filter("div.spwidget-item-template"));e._getListItems().then(function(){e.showItemsOnBoard();e.statesCntr.find("div.spwidget-board-state").each(function(){var a=b(this);a.sortable({connectWith:a.siblings(),containment:g,cursor:"move",tolerance:"pointer",opacity:".80",placeholder:"ui-state-highlight spwidget-board-placeholder",forcePlaceholderSize:!0,remove:function(a,b){e.setBoardColumnHeight()}})});e.statesCntr.disableSelection();e.initDone=!0;e.setBoardColumnHeight();g.addClass("hasSPShowBoard").removeClass("loadingSPShowBoard");
b.isFunction(e.onBoardCreate)&&e.onBoardCreate.call(g,e.getEventObject());b(g).trigger("spwidget:boardcreate",[g,e.getEventObject()])})}).fail(function(a,b,e){g.append('<div class="ui-state-error"><p>'+a+"</p></div>")});return this})};d.styleSheet="/** \n * Stylesheet for the Board widget\n * \n * BUILD: July 20, 2013 - 03:32 PM\n */\ndiv.spwidget-board {\n    width: 100%;\n    position: relative;\n}\n\ndiv.spwidget-board div.spwidget-board-headers,\ndiv.spwidget-board div.spwidget-board-headers-cntr,\ndiv.spwidget-board div.spwidget-board-states-cntr, \ndiv.spwidget-board div.spwidget-board-states {\n    width: 100%;\n}\n\ndiv.spwidget-board div.spwidget-board-state {\n    width: 49%;\n    float: left;\n    margin: .1%;\n    padding: .2%;\n    overflow: auto;\n}\n\ndiv.spwidget-board div.spwidget-board-headers-cntr {\n    border: none;\n}\ndiv.spwidget-board div.spwidget-board-headers-cntr div.spwidget-board-state {\n    text-align: center;\n    font-weight: bold;\n    font-size: 1.1em;\n    overflow: hidden;\n    word-wrap: break-word;\n}\ndiv.spwidget-board div.spwidget-board-states div.spwidget-board-state {\n    margin-bottom: 1em;\n    min-height: 10em;\n}\n\ndiv.spwidget-board div.spwidget-board-state div.spwidget-board-state-item {\n    padding: .2em;\n    margin: .5em .2em;\n    font-weight: normal;\n    cursor: move;\n    overflow: auto;\n}\ndiv.spwidget-board div.spwidget-board-state-item div.spwidget-board-item-actions{\n    margin-top: .5em;\n    padding: .2em .5em;\n    width: 25%;\n    overflow: hidden;\n    text-align: center;\n}\ndiv.spwidget-board .spwidget-board-placeholder {\n    height: 3em;\n}\n\n/** Setting container */\ndiv.spwidget-board-settings {\n    font-size: .8em;\n    margin: .2em;\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list-cntr {\n    z-index: 5;\n    position: absolute;\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list-cntr > div {\n    padding: .2em;\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list-cntr > div:first-child,\ndiv.spwidget-board-settings div.spwidget-board-column-list-cntr > div:last-child {\n    text-align: right;\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list {\n    width: 20em;\n    height: 17em;\n    overflow: auto;\n    position: relative\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list-cntr .spwidget-board-msg {\n    position: absolute;\n    top: 1px;\n    left: 1px;\n    padding: .2em;\n}\ndiv.spwidget-board-settings div.ui-state-default {\n    position: relative;\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list > a {\n    display: block;\n    margin: .2em;\n    padding: .2em;\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list > a > span.ui-icon {\n    display: inline-block;\n}\n\n/* Number of Columns (96 % #columns)\n * Currently support 10 columns. \n */\ndiv.spwidget-board .spwidget-states-3 div.spwidget-board-state {\n    width: 32.4%;\n}\ndiv.spwidget-board .spwidget-states-4 div.spwidget-board-state {\n    width: 24%;\n}\ndiv.spwidget-board .spwidget-states-5 div.spwidget-board-state {\n    width: 19.1%;\n}\ndiv.spwidget-board .spwidget-states-6 div.spwidget-board-state {\n    width: 15.8%;\n}\ndiv.spwidget-board .spwidget-states-7 div.spwidget-board-state {\n    width: 13.4%;\n}\ndiv.spwidget-board .spwidget-states-8 div.spwidget-board-state {\n    width: 11.6%;\n}\ndiv.spwidget-board .spwidget-states-9 div.spwidget-board-state {\n    width: 10.2%;\n}\ndiv.spwidget-board .spwidget-states-10 div.spwidget-board-state {\n    width: 9.1%;\n}\n";
d.htmlTemplate='<div class="spwidget-board">\n    <div class="spwidget-board-settings" style="display:none;">\n        <div class=\'spwidget-board-settings-columns\'>Columns</div>\n        <div class="spwidget-board-column-list-cntr ui-widget-content ui-corner-all" style="display: none">\n            <div class="ui-state-default">\n                <span>\n                    <span class="spwidget-board-column-total"></span> \n                    <span class="spwidget-board-column-total-label">Selected.</span>\n                </span>\n                <button type="button" name="check" title="Check-Uncheck All">Check</button>\n                <button type="button" name="close" title="Close">Close</button>\n            </div>\n            <div class="spwidget-board-column-list">\n            </div>\n            <div class="ui-state-default">\n                <button type="button" name="apply">Apply</button>\n            </div>\n        </div>\n    </div>\n    <div class="spwidget-board-headers">\n        <div class="spwidget-board-headers-cntr ui-widget-content ui-corner-all">\n            <div class="spwidget-board-state ui-widget-content ui-corner-all"></div>\n            <div style="clear:both;"></div>\n        </div>\n    </div>\n    <div style="clear:both;"></div>\n    <div class="spwidget-board-states">\n        <div class="spwidget-board-states-cntr">\n            <div class="spwidget-board-state ui-widget-content ui-corner-all"></div>\n            <div style="clear:both;"></div>\n        </div>\n    </div>\n    <div style="clear:both;"></div>\n</div>\n<div class="spwidget-item-template">\n    <div>\n        <div>#{{ID}}: {{Title}}</div>\n        <div class="ui-state-active ui-corner-all spwidget-board-item-actions">\n            <a class="spwidgets-board-action" href="javascript:" title="View Item" data-spwidgets_id="{{ID}}" data-spwidgets_board_action="view-item"><img src="/_layouts/images/icgen.gif" border="0"/></a>\n            <a class="spwidgets-board-action" href="javascript:" title="Edit Item" data-spwidgets_id="{{ID}}" data-spwidgets_board_action="edit-item"><img src="/_layouts/images/CMSEditSourceDoc.GIF" border="0"/></a>\n        </div>\n    </div>\n</div>\n'})(u);
(function(b){var d={_islookupFieldCssDone:!1,_isLookupbodyEventDone:!1};b.SPWidgets.defaults.LookupField={list:"",allowMultiples:!0,inputLabel:"",inputPlaceholder:"Type and Pick",readOnly:!1,exactMatch:!0,uiContainer:null,selectFields:["Title"],filter:"",filterFields:["Title"],template:'<div>{{Title}} <span class="spwidgets-item-remove">[x]</span></div>',listTemplate:"{{Title}}",listHeight:0,onItemAdd:null,onItemRemove:null,onReady:null,msgNoItems:"",maxResults:50,minLength:2,hideInput:!0,padDelimeter:!1,
showSelector:!1};b.fn.SPLookupField=function(c){d._islookupFieldCssDone||(d._islookupFieldCssDone=!0,b('<style type="text/css">\n\n'+d.styleSheet+"\n\n</style>").prependTo("head"));var f=arguments;this.each(function(){var g=b(this);if(!g.is("input")&&!g.is("textarea")||g.hasClass("hasLookupSPField")){if("string"===typeof c&&g.is("input")){var a=g.data("SPWidgetLookupFieldUI").data("SPWidgetLookupFieldOpt");if("method"===c.toLowerCase()){var g=String(f[1]||"").toLowerCase(),k=f[2];"clear"===g&&k?void 0===
k.id?(a._cntr.find("div.spwidgets-lookup-selected").css("display","none").empty(),a._ele.val("").change(),a._cntr.find("div.spwidgets-lookup-input").css("display","")):alert("TBD... Delete individual ID's not yet supported. Contact plugin author."):"add"===g&&d.addItem(a,k)}}return this}a=b.extend({},b.SPWidgets.defaults.LookupField,c,{_ele:g.css("display","none").addClass("hasLookupSPField")});a.showSelectedItems=function(e,c){var f=a._selectedItemsCntr.css("display",""),g=[],k=!1;f.find("div.spwidgets-item").length&&
!1!==a.allowMultiples||f.empty();b.isArray(e)?g=e:g.push(e);b.each(g,function(e,g){if(!f.find("div.spwidgets-item-id-"+g.ID).length){var m=b('<div class="spwidgets-item spwidgets-item-id-'+g.ID+'" data-spid="'+g.ID+'" style="display:none">'+b.SPWidgets.fillTemplate(a.template,g)+"</div>").appendTo(f).find(".spwidgets-item-remove").on("click.SPWidgets",function(b){d.removeItem(a,this)}).end();b.isFunction(a.onItemAdd)&&a.onItemAdd.call(a._ele,m,g,a._cntr);0<f.find("div.spwidgets-item-id-"+g.ID).length&&
(k=!0,m.fadeIn("slow").promise().then(function(){b(this).css("display","")}),!0!==c&&a.storeItemIDs(g.ID,a.allowMultiples),!1===a.allowMultiples&&!0===a.hideInput&&a._lookupInputEleCntr.css("display","none"))}});a.readOnly&&a._cntr.find(".spwidgets-item-remove").remove();k&&a._ele.trigger("change")};a.storeItemIDs=function(e,c){var f=b.trim(a._ele.val()),d=!1;b.isArray(e)||(e=[e]);!0!==c&&(f="");b.each(e,function(b,e){e&&(1>f.length&&(!0===a.padDelimeter&&!d)&&(f+=";#",d=!0),0<f.length&&(f+=";#"),
f+=e+";#")});a._ele.val(f)};a.showCurrentInputSelection=function(e){return b.Deferred(function(c){var f=b.extend({},{async:!0},e),d=b.SPWidgets.parseLookupFieldValue(a._ele.val());d.length?b().SPServices({operation:"GetListItems",async:f.async,listName:a.list,CAMLQuery:"<Query><Where>"+b.SPWidgets.getCamlLogical({type:"OR",values:d,onEachValue:function(a){var b="";a.id&&(b="<Eq><FieldRef Name='ID'/><Value Type='Counter'>"+a.id+"</Value></Eq>");return b}})+"</Where></Query>",CAMLViewFields:"<ViewFields>"+
a._selectFields+"</ViewFields>",CAMLRowLimit:0,completefunc:function(e,f){var d=b(e.responseXML).SPFilterNode("z:row").SPXmlToJson({includeAllAttrs:!0,removeOws:!0});a.showSelectedItems(d,!0);c.resolveWith(a,[e,f])}}):c.resolveWith(a,[null,null])}).promise()};a._cntr=b(d.htmlTemplate).find(".spwidgets-lookup-cntr").clone(1);a._selectedItemsCntr=a._cntr.find("div.spwidgets-lookup-selected");a._lookupInputEleCntr=a._cntr.find("div.spwidgets-lookup-input");a._lookupInputEle=a._lookupInputEleCntr.find("input[name='spwidgetLookupInput']");
a._ignoreKeywordsRegEx=/^(of|and|a|an|to|by|the|or)$/i;a._cntr.data("SPWidgetLookupFieldOpt",a);a._ele.data("SPWidgetLookupFieldUI",a._cntr);null===a.uiContainer?a._cntr.insertAfter(a._ele):a._cntr.appendTo(b(a.uiContainer));a.showSelector?(a._selectorCntr=a._cntr.find("div.spwidget-lookup-selector-cntr"),a._queryInitDone=!1,a._cntr.find(".spwidget-lookup-selector-showhide").on("click",function(b){a._selectorCntr.is(":visible")?a._selectorCntr.css("display","none"):(a._selectorCntr.css("display",
"block").position({my:"left top",at:"left bottom",of:a._lookupInputEle}),a._queryInitDone||(a._queryInitDone=!0,d.doSelectorDataInit(a)))}),a._selectorCntr.find("button[name='close']").button({text:!1,icons:{primary:"ui-icon-circle-close"}}).click(function(){a._selectorCntr.css("display","none")}),a._lookupInputEle.on("focus",function(b){a._selectorCntr.is(":visible")&&a._selectorCntr.css("display","none")})):a._cntr.find(".spwidget-lookup-selector-showhide,.spwidget-lookup-selector-cntr").remove();
a.inputLabel?a._cntr.find("div.spwidgets-lookup-input label").empty().append(a.inputLabel):a._cntr.find("div.spwidgets-lookup-input label").remove();a.inputPlaceholder&&a._lookupInputEleCntr.find("input").attr("placeholder",a.inputPlaceholder);!0===a.readOnly&&(a._lookupInputEleCntr.css("display","none"),a._cntr.find("div.spwidget-lookup").addClass("spwidget-lookup-readyonly"));a._selectFields="";b.each(a.selectFields,function(b,e){a._selectFields+="<FieldRef Name='"+e+"'/>"});a._templateTokens=String(a.template).match(/(\$\{.*?\})/g);
null==a._templateTokens&&(a._templateTokens=[]);b.each(a._templateTokens,function(b,e){a._templateTokens[b]=e.replace(/[\$\{\}]/g,"")});var e={};a._cntr.find("div.spwidgets-lookup-input input").autocomplete({minLength:2,appendTo:a._cntr,open:function(e,c){b(this).autocomplete("widget").each(function(){0<a.listHeight&&b(this).css("height",a.listHeight+"px");return!1})},source:function(c,f){c.term=b.trim(c.term);var d=String(b.trim(c.term)).toUpperCase();if(d in e)f(e[d]);else{e[d]=[];var g=[],h=String(c.term);
if(null===h.match(/\D/)&&null!==h.match(/\d/))g.push("<Eq><FieldRef Name='ID'/><Value Type='Counter'>"+h+"</Value></Eq>");else{h=[c.term];a.exactMatch||(h=String(c.term).split(/ /));for(var k=0,r=a.filterFields.length;k<r;k++){for(var y=[],v=0,z=h.length;v<z;v++)a._ignoreKeywordsRegEx.test(h[v])||y.push("<Contains><FieldRef Name='"+a.filterFields[k]+"'/><Value Type='Text'>"+h[v]+"</Value></Contains>");g.push(b.SPWidgets.getCamlLogical({values:y,type:"AND"}))}}g=b.SPWidgets.getCamlLogical({values:g,
type:"OR"});a.filter&&(g=b.SPWidgets.getCamlLogical({values:[g,a.filter],type:"AND"}));b().SPServices({operation:"GetListItems",listName:a.list,async:!0,CAMLQuery:"<Query><Where>"+g+"</Where></Query>",CAMLRowLimit:a.maxResults,CAMLViewFields:"<ViewFields>"+a._selectFields+"</ViewFields>",completefunc:function(c,g){b(c.responseXML).SPFilterNode("z:row").each(function(){var c=b(this).SPXmlToJson({includeAllAttrs:!0})[0];c.value="";c.label=b.SPWidgets.fillTemplate(a.listTemplate,c);e[d].push(c)});f(e[d])}})}},
select:function(b,e){a.showSelectedItems(e.item)}}).on("keyup.SPWidgets",function(e){if(13==e.which){var c=b(e.target).val();c&&String(c).length<a.minLength&&b(e.target).autocomplete("search",c+"    ")}});a._ele.val()?a.showCurrentInputSelection().then(function(e,c){b.isFunction(a.onReady)&&a.onReady.call(a._ele,a._cntr)}):b.isFunction(a.onReady)&&a.onReady.call(a._ele,a._cntr);return this});return this};d.removeItem=function(c,f){var g=b(f).closest("div.spwidgets-item"),a=g.closest("div.spwidgets-lookup-selected"),
k=g.data("spid"),e=b.SPWidgets.parseLookupFieldValue(c._ele.val()),l=[],n=0,q=0;g.fadeOut("fast").promise().then(function(){g.remove();!c.msgNoItems&&(!1===c.allowMultiples||!0===c.allowMultiples&&1>a.find("div.spwidgets-item").length)&&a.css("display","none");!1===c.allowMultiples&&!0===c.hideInput&&c._lookupInputEleCntr.css("display","");1>a.find("div.spwidgets-item").length&&c.msgNoItems&&a.append("<div>"+c.msgNoItems+"</div>")});n=0;for(q=e.length;n<q;n++)e[n].id!=k&&l.push(e[n].id);c._lookupInputEleCntr.find("input").focus();
c.storeItemIDs(l);c._ele.change();return d};d.addItem=function(b,f){if(!f||"string"!==typeof f)return b;var d=b._ele.val();d&&(d+=";#");b._ele.val(d+f);b.showCurrentInputSelection();return b};d.doSelectorDataInit=function(c){var f={$resultsCntr:c._selectorCntr.find("div.spwidget-lookup-selector-item-cntr"),nextPageToken:"",isLoading:!1,hasMorePages:!0,$lastPage:b(),queryXml:c.filter?"<Query><Where>"+c.filter+"</Where></Query>":"<Query></Query>"};d._isLookupbodyEventDone||(d._isLookupbodyEventDone=
!0,b("body").on("click",function(c){c=b(c.target);var a=b("div.spwidget-lookup-selector-cntr:visible"),f=null;a.length&&(f=c.closest("div.spwidget-lookup-selector-cntr"),!f.length&&c.is(".spwidget-lookup-selector-showhide")&&(f=c.parent().find("div.spwidget-lookup-selector-cntr")),a.not(f).hide())}));f.getListRows=function(){return b.Deferred(function(d){f.isLoading?d.resolveWith($lastPage,[$lastPage]):(f.isLoading=!0,b().SPServices({operation:"GetListItems",listName:c.list,async:!0,CAMLQuery:f.queryXml,
CAMLRowLimit:c.maxResults,CAMLViewFields:"<ViewFields>"+c._selectFields+"</ViewFields>",CAMLQueryOptions:function(){if(""!==f.nextPageToken)return"<QueryOptions><Paging ListItemCollectionPositionNext='"+b.SPWidgets.escapeXML(f.nextPageToken)+"'/></QueryOptions>"}(),completefunc:function(a,h){var e=b(a.responseXML),l=e.SPFilterNode("rs:data").eq(0),n=e.SPFilterNode("z:row").SPXmlToJson({includeAllAttrs:!0,removeOws:!0}),e=b("<div/>").insertBefore(f.$nextPage),q="";f.nextPageToken=l.attr("ListItemCollectionPositionNext")||
"";""===f.nextPageToken&&(f.hasMorePages=!1);b.each(n,function(a,e){e.value="";e.label=b.SPWidgets.fillTemplate(c.listTemplate,e);q+='<div class="spwidget-lookup-item" data-spwidgetsindex="'+a+'">'+e.label+"</div>"});e.html(q).find("div.spwidget-lookup-item").each(function(){var a=b(this);a.hover(function(){a.addClass("ui-state-hover")},function(){a.removeClass("ui-state-hover")})}).end().on("click","div.spwidget-lookup-item",function(a){a=b(this).data("spwidgetsindex");c.showSelectedItems(n[a])});
f.isLoading=!1;d.resolveWith(e,[e])}}))})};f.$nextPage=b('<div class="ui-state-highlight">Next...</div>').appendTo(f.$resultsCntr.empty()).click(function(b){f.hasMorePages&&(f.$nextPage.css("display","none"),f.getListRows().then(function(a){f.hasMorePages&&f.$nextPage.css("display","");f.$resultsCntr.scrollTop(a.position().top)}))});f.getListRows();return c};d.styleSheet='/**\n * Stylesheet for the Lookup Field widget.\n * \n */\n\n.spwidgets-lookup-cntr {\n    position: relative;\n    display: inline-block;\n    zoom: 1; /* IE7 hack */\n    *display: inline; /* IE7 hack */\n}\n\n\n.spwidgets-lookup-cntr .spwidgets-lookup-selected {\n    -moz-appearance: textfield;\n    -webkit-appearance: textfield;\n    background-color: white;\n    background-color: -moz-field;\n    border: 1px solid  darkgray;\n    box-shadow: 1px 1px 1px 0 lightgray inset;  \n    font: -moz-field;\n    font: -webkit-small-control;\n    margin-top: 5px;\n    padding: 2px 5px; \n}\n\n.spwidgets-lookup-cntr  .spwidgets-lookup-selected .spwidgets-item {\n    display: inline-block;\n    margin-left: .5em;\n}\n.spwidgets-lookup-cntr .spwidgets-item:first-child {\n    margin-left: 0px;\n}\n.spwidgets-lookup-cntr .spwidgets-item-remove {\n    color: red;\n    cursor: pointer;\n}\n\n.spwidgets-lookup-cntr .spwidgets-lookup-input {\n    margin: .2em 0em;\n    position: relative;\n}\n.spwidgets-lookup-cntr ul.ui-autocomplete {\n    overflow: auto;\n    z-index: 1;\n}\n\n/* Ready only display */\n.spwidgets-lookup-cntr div.spwidget-lookup-readyonly .spwidgets-lookup-selected {\n    -moz-appearance: none;\n    -webkit-appearance: none;\n    background-color: transparent;\n    border: none;\n    box-shadow: none;\n    font: inherit;\n}\n.spwidgets-lookup-cntr div.spwidget-lookup-readyonly .spwidgets-item-remove {\n    display: none;\n}\n\n/** SELECTOR */\n.spwidgets-lookup-cntr .spwidget-lookup-selector-showhide {\n    height: 16px;\n    width: 16px;\n    text-indent: -99999px;\n    background-repeat: no-repeat;\n    background-image: url("/_layouts/images/bizdatacontentsource.gif");\n    display: inline-block;\n    cursor: pointer;\n}\n.spwidgets-lookup-cntr div.spwidget-lookup-selector-cntr {\n    display: none;\n    position: absolute;\n    left: 0px;\n    z-index: 10;\n    padding: .2em;\n    width: 98%;\n    font-size: .8em;\n}\n.spwidgets-lookup-cntr div.spwidget-lookup-selector-cntr > .ui-state-default {\n    padding: .2em;\n    text-align: right;\n}\n\n.spwidgets-lookup-cntr div.spwidget-lookup-selector-item-cntr {\n    height: 15em;\n    overflow: auto;\n    padding: .2em;\n    font-size: 1em;\n}\n.spwidgets-lookup-cntr div.spwidget-lookup-selector-item-cntr .ui-state-highlight {\n    padding: .5em;\n    margin: 1em .2em;\n    text-align: center;\n    font-size: 1.1em;\n    font-weight: bold;\n    cursor: pointer;\n}\n.spwidgets-lookup-cntr div.spwidget-lookup-selector-item-cntr .spwidget-lookup-item {\n    padding: .2em .5em;\n    margin: .2em;\n    cursor: pointer;\n}\n';
d.htmlTemplate='<div>\n    <div class="spwidgets-lookup-cntr">\n        <div class="spwidget-lookup">\n            <div class="spwidgets-lookup-selected" style="display:none;">\n            </div>\n            <div class="spwidgets-lookup-input">\n                <label>Add</label>\n                <input type="text" name="spwidgetLookupInput" value="" />\n                <span class="spwidget-lookup-selector-showhide" title="Browse">Browse</span>\n                <div class="spwidget-lookup-selector-cntr ui-widget-content">\n                    <div class="ui-state-default">\n                        <button type="button" name="close" title="Close">Close</button>\n                    </div>\n                    <div class="spwidget-lookup-selector-item-cntr">\n                        <div style="height: 1000px;"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n'})(u);
d.pt.pickSPUser={_isPickSPUserCssDone:!1};d.fn.pickSPUser=function(b){d.pt.pickSPUser._isPickSPUserCssDone||(d.pt.pickSPUser._isPickSPUserCssDone=!0,d('<style type="text/css">\n\n'+d.pt.pickSPUser.styleSheet+"\n\n</style>").prependTo("head"));var h=arguments;this.each(function(){var c=d(this);if(!c.is("input")||c.hasClass("hasPickSPUser"))return"string"===typeof b&&c.is("input")?d.pt.pickSPUser.handleAction.apply(this,h):this;var f=d.extend({},{allowMultiples:!0,maxSearchResults:50,webURL:d().SPServices.SPGetCurrentSite(),
onPickUser:null,onCreate:null,onRemoveUser:null,inputPlaceholder:"Type and Pick"},b,{eleUserInput:c.css("display","none").addClass("hasPickSPUser")});f.maxSearchResults=parseInt(f.maxSearchResults)||50;var g=d(d.pt.pickSPUser.htmlTemplate).find(".pt-pickSPUser").clone(1).insertAfter(c);f.eleSelected=g.find("div.pt-pickSPUser-selected").empty();f.elePickInput=g.find("div.pt-pickSPUser-input");f.addPeopleToList=function(a,b){var c=(new String(a)).split(";#"),g=c.length,h,m,t;for(h=0;h<g;h++)m=c[h],
h++,t=c[h],m=d.pt.pickSPUser.getUserHtmlElement(f,m,t).appendTo(f.eleSelected),function(a,b){f.getSearchResults(b).done(function(e,c,f){var g=String(b).toLowerCase();d.each(e,function(b,e){if(String(e.displayName).toLowerCase()===g)return a.data("pickspuser_object",e),!1})})}(m,t);d.pt.addHoverEffect(f.eleSelected.find("div.pt-pickSPUser-person-cntr"));!1===f.allowMultiples&&f.elePickInput.css("display","none");d.pt.pickSPUser.storeListOfUsers(f.eleSelected,b)};f.getSearchResults=function(a){return d.Deferred(function(b){d().SPServices({operation:"SearchPrincipals",
searchText:a,maxResults:f.maxSearchResults,async:!0,webURL:f.webURL,completefunc:function(a,c){var f=[];d(a.responseXML).find("PrincipalInfo").each(function(){var a=d(this);f.push({displayName:a.find("DisplayName").text(),accountId:a.find("UserInfoID").text(),accountName:a.find("AccountName").text(),accountType:a.find("PrincipalType").text(),value:a.find("DisplayName").text(),label:a.find("DisplayName").text()})});b.resolveWith(a,[f,a,c])}})}).promise()};!0===f.allowMultiples&&f.eleSelected.addClass("pt-pickSPUser-selected-multiple");
c.val()&&f.addPeopleToList(c.val(),noEvents);var a={};f.elePickInput.find("input[name='pickSPUserInputField']").attr("placeholder",f.inputPlaceholder).autocomplete({minLength:3,source:function(b,e){b.term in a?e(a[b.term]):(a[b.term]=[],f.getSearchResults(b.term).then(function(c,f,d){a[b.term].push.apply(a[b.term],c);e(a[b.term])}))},select:function(a,b){if(!1===f.allowMultiples)f.eleSelected.empty();else if(f.eleSelected.find("div[data-pickspuserid='"+b.item.accountId+"']").length)return;d.pt.pickSPUser.getUserHtmlElement(f,
b.item.accountId,b.item.displayName).appendTo(f.eleSelected).data("pickspuser_object",b.item);d.pt.pickSPUser.storeListOfUsers(g);d.pt.addHoverEffect(g.find("div.pt-pickSPUser-person-cntr"));setTimeout(function(){a.target.value=""},50);!1===f.allowMultiples&&f.elePickInput.hide();d.isFunction(f.onPickUser)&&f.onPickUser.call(f.eleUserInput,d.extend({},b.item));c.trigger(d.Event("spwidget:peoplePickerAdd"),[f.eleUserInput,d.extend({},b.item)])}});g.data("pickSPUserContainerOpt",f);c.data("pickSPUserContainer",
g);d.isFunction(f.onCreate)&&f.onCreate.call(c,c);c.trigger(d.Event("spwidget:peoplePickerCreate"),[f.eleUserInput]);return this});return this};d.pt.pickSPUser.getUserHtmlElement=function(b,h,c){b=d(d.pt.pickSPUser.htmlTemplate).find(".pt-pickSPUser-person").clone(1);b.attr("data-pickSPUserID",h);b.find("span.pt-person-name").append(c).end().attr("data-pickSPUserNAME",c);return b};d.pt.pickSPUser.removeUser=function(b){var h=d(b).closest("div.pt-pickSPUser"),c=h.data("pickSPUserContainerOpt");b=d(b).closest("div.pt-pickSPUser-person");
var f=b.data("pickspuser_object");d.isFunction(c.onRemoveUser)&&c.onRemoveUser.call(c.ele,c.ele,b,f);b.fadeOut("fast",function(){d(this).remove();d.pt.pickSPUser.storeListOfUsers(h)});!1===c.allowMultiples&&c.elePickInput.show("fast",function(){c.elePickInput.find("input").focus()});c.eleUserInput.trigger(d.Event("spwidget:peoplePickerRemove"),[c.eleUserInput,f])};d.pt.pickSPUser.storeListOfUsers=function(b,h){var c=d(b).closest("div.pt-pickSPUser"),f=c.data("pickSPUserContainerOpt"),g="",a={};c.find("div.pt-pickSPUser-selected div.pt-pickSPUser-person").each(function(){a[d(this).attr("data-pickSPUserID")]||
(a[d(this).attr("data-pickSPUserID")]=!0,g&&(g+=";#"),g+=d(this).attr("data-pickSPUserID"),g+=";#",g+=d(this).attr("data-pickSPUserNAME"))});f.eleUserInput.val(g);h||f.eleUserInput.change()};d.pt.pickSPUser.handleAction=function(b,h,c){b=String(b).toLowerCase();h=String(h).toLowerCase();o=d(this).data("pickSPUserContainer").data("pickSPUserContainerOpt");ret=this;if("method"===b)switch(h){case "clear":o.eleUserInput.val("");o.eleSelected.empty();!1===o.allowMultiples&&(o.eleSelected.css("display",
"none"),o.elePickInput.show());break;case "destroy":d(this).hasClass("hasPickSPUser")&&d(this).removeClass("hasPickSPUser").next(".pt-pickSPUser").remove().show().trigger("change");break;case "add":o.addPeopleToList(c);break;case "remove":c&&(b=o.eleSelected.find("div[data-pickspuserid='"+c+"']"),b.length||(b=o.eleSelected.find("div[data-pickspusername='"+c+"']")),b.length&&d.pt.pickSPUser.removeUser(b));break;case "getSelected":ret=d.SPWidgets.parseLookupFieldValue(o.eleUserInput.val())}return ret};
d.pt.pickSPUser.styleSheet="/**\n * Styles for the Pick User Widget\n */\n.pt-pickSPUser .pt-pickSPUser-selected-multiple {\n    min-height: 3em;\n}\n\n.pt-pickSPUser .pt-pickSPUser-selected .pt-pickSPUser-person {\n    float: left;\n    margin-left: .2em;\n}\n.pt-pickSPUser .pt-pickSPUser-hint {\n    font-size: .9em;\n}\n\n\n.pt-pickSPUser .pt-pickSPUser-person-cntr {\n    margin: .2em 0em;\n    padding: .2em;\n    position: relative;\n}\n\n.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-person-name {\n    padding-right: 2em;\n}\n\n/* Item action container (delete button) */\n.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-pickSPUser-person-actions {\n    position: absolute;\n    right: 1px;\n    top: 1px;\n    padding: .2em;\n    display: none;\n}\n.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-pickSPUser-person-actions .pt-pickSPUser-person-action-links,\n.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-pickSPUser-person-actions .pt-pickSPUser-person-action-links .tt-confirm-delete {\n    float:right;\n}\n\n/* Make the action visible if we hover or we are trying to confirm a deletion */\n.pt-pickSPUser .pt-pickSPUser-person-cntr.ui-state-hover .pt-pickSPUser-person-actions,\n.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-pickSPUser-person-actions.tt-confirm,\n.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-pickSPUser-person-actions a {\n    display:block;\n    float: right;\n}\n\n/* autocomplete busy image */\n.ui-autocomplete-loading {\n    background: white url('/_layouts/images/loading.gif') right center no-repeat;\n}\n\n\n";
d.pt.pickSPUser.htmlTemplate='\x3c!--\n    Html Templates for the PickSPUser plugin.\n    \n    |\n    |   $Author$\n    | $Revision$\n    |     $Date$\n    |       $Id$\n    |\n--\x3e\n<div>\n    <div class="pt-pickSPUser">\n        <div class="pt-pickSPUser-selected">\n            None Selected!\n        </div>\n        <div style="clear:both"></div>\n        <div class="pt-pickSPUser-input" \n                title="Type user name above to view search results.">\n            <input name="pickSPUserInputField" value="" type="text"/>\n        </div>\n    </div>\n    \n    <div class="pt-pickSPUser-person">\n        <div class="pt-pickSPUser-person-cntr ui-state-default ui-corner-all">\n            <span class="pt-person-name"></span>\n            <div class="pt-pickSPUser-person-actions">\n                <div class="tt-record-item-action-links">\n                    <a class="tt-delete-icon" href="javascript:" onclick="jQuery.pt.pickSPUser.removeUser(this);">\n                        <img style="border: medium none; margin-right: 2px;" alt="Delete" src="/_layouts/images/delitem.gif">\n                    </a>\n                    <div style="clear:both;"></div>\n                </div>\n                <div style="clear:both;"></div>\n            </div>\n        </div>\n    </div>\n</div>\n';
d.pt.addHoverEffect=function(b){return d(b).each(function(){if(!d(this).hasClass("addHoverEffectDone")){d(this).addClass("addHoverEffectDone");var b=this;d(b).mouseenter(function(){d(b).toggleClass("ui-state-hover")});d(b).mouseleave(function(){d(b).toggleClass("ui-state-hover")})}})};d.pt._isSPUploadCssDone=!1;d.fn.SPControlUpload=function(b){var h=d.extend({},{listName:"",folderPath:"",uploadDonePage:"/_layouts/viewlsts.aspx",onPageChange:null,uploadUrlOpt:"",overwrite:!1,uploadPage:"/_layouts/Upload.aspx",
overlayClass:"",overlayBgColor:"white",overlayMessage:'<div class="loadingOverlayMsg">Loading...</div>'},b);d.pt._isSPUploadCssDone||(d.pt._isSPUploadCssDone=!0,d('<style type="text/css">\n\n'+d.pt.SPUploadStyleSheet+"\n\n</style>").prependTo("head"));h.listName&&0!=h.listName.indexOf("{")&&(h.listName=d.pt.getListUID(h.listName));if(!h.listName)return d(this).html('<div class="ui-state-error">Input parameter [listName] not valid!</div>'),this;h.siteUrl=d().SPServices.SPGetCurrentSite();-1==String(h.uploadPage).toLowerCase().indexOf("http")&&
(b="/",0==h.uploadPage.indexOf("/")&&(b=""),h.uploadPage=h.siteUrl+b+h.uploadPage,h.uploadPage2=h.siteUrl+"/_layouts/UploadEx.aspx");-1==String(h.uploadDonePage).toLowerCase().indexOf("http")&&(b="/",0==h.uploadDonePage.indexOf("/")&&(b=""),h.uploadDonePage=h.siteUrl+b+h.uploadDonePage);h._uploadUrlParams="?List="+d.pt.getEscapedUrl(h.listName)+"&RootFolder="+d.pt.getEscapedUrl(h.folderPath)+"&Source="+d.pt.getEscapedUrl(h.uploadDonePage)+"&"+h.uploadUrlOpt;h.uploadPage+=h._uploadUrlParams;h.uploadPage2+=
h._uploadUrlParams;h._lastError="";h._reloadCount=0;h.ev={state:1,action:"uploading",hideOverlay:!0,pageUrl:"",page:null,isUploadDone:!1};var c="";h.overlayBgColor&&(c="style='background-color:"+h.overlayBgColor+";' ");d(this).each(function(){var b=d(this),g=b.outerHeight()-75,a={top:0,left:0,height:b.outerHeight(!0)-15,display:"block"};b.empty().addClass("hasSPControlUploadUI").append("<div class='SPControlUploadUI spcontrolupload'><div class='mainContainer'><div class='iFrameWindow'><iframe name='SPControlUploadUI' frameborder='0' scrollbars='yes' scrolling='yes'></iframe></div><div class='buttonPane'><button type='button' class='ui-state-default' name='upload_button' value='upload' onclick='$.pt._onUpload(this);'>Upload</button></div><div class='loadingOverlay "+
h.overlayClass+"' "+c+"></div></div></div>").find(".SPControlUploadUI").data("SPControlUploadOptions",h).end().find("iframe").css("height",g).load(function(a){d.pt._onIFramePageChange(b.find(".SPControlUploadUI"))}).attr("src",h.uploadPage).end().find(".loadingOverlay").append(h.overlayMessage).css(a);return this});return this};d.pt._onUpload=function(b){var h=d(b).closest(".SPControlUploadUI"),c=h.find("iframe").contents(),f=c.find("input[type='file']").closest("tr").siblings().find("span");b=h.data("SPControlUploadOptions");
var g=b.ev;f.css("display","none");if(c.find("input[type='file']").val()){g.state=2;g.action="preLoad";if(b.onPageChange&&!1===b.onPageChange.call(h.closest(".hasSPControlUploadUI"),g))return!1;h.find(".buttonPane").css("display","none").end().find(".loadingOverlay").fadeIn("slow",function(){c.find("input[type='button'][id$='btnOK']").click();if(f.is(":visible"))return h.find(".loadingOverlay").css("display","none").end().find(".buttonPane").show(0).end(),!1})}};d.pt._onIFramePageChange=function(b){var h=
d(b).closest(".SPControlUploadUI"),c=h.find("iframe").contents(),f=h.data("SPControlUploadOptions"),g=f.ev;g.pageUrl=c[0].location.href;g.page=c;setTimeout(function(){if(d.pt.isSameUrlpage(d.pt.getUnEscapedUrl(g.pageUrl),d.pt.getUnEscapedUrl(f.uploadPage))||d.pt.isSameUrlpage(d.pt.getUnEscapedUrl(g.pageUrl),d.pt.getUnEscapedUrl(f.uploadPage2))){c.find("form").children(":visible").hide();c.find("form").append("<div id='SPControlUploadModUI' style='position:absolute;width:99.9%;height:99.9%x;left:0px;top:0px;background-color:white;padding-top:3em;'></div>");
if(RegExp(/error/i).test(d.trim(c.find(".ms-pagetitle").text()))||RegExp(/error/i).test(d.trim(c.find("title").text()))||RegExp(/error\.aspx/i).test(d.trim(c.find("form").attr("action")))){f._lastError=c.find("[id$='LabelMessage']").text();if(1<f._reloadCount){alert("Error encountered during upload which is causing program to loop. Last upload error was: "+f._lastError);h.find(".loadingOverlay").fadeOut();return}f._reloadCount+=1;h.find("iframe").attr("src",f.uploadPage);return}if(c.find("#GearPage")&&
!c.find("input[type='file']").length)return;c.find("input[type='file']").closest("table").appendTo(c.find("#SPControlUploadModUI")).removeClass("ms-authoringcontrols").find("a[id$='UploadMultipleLink']").closest("tr").css("display","none").end().end().find("input[type='checkbox'][name$='OverwriteSingle']").closest("tr").css("display","none").end().end().find(".ms-fileinput").css("font-size","13pt");f._lastError&&(c.find("input[type='file']").after('<div style="color:red;"><div class="ui-state-error">ERROR: '+
f._lastError+"</div></div>"),f._lastError="");f._reloadCount=0;f.overwrite?c.find("input[type='checkbox'][name$='OverwriteSingle']").prop("checked","checked"):c.find("input[type='checkbox'][name$='OverwriteSingle']").prop("checked","");h.find(".buttonPane").show();g.state=1;g.action="postLoad";g.hideOverlay=!0}else{g.state=3;g.action="postLoad";g.hideOverlay=!0;var a=c.find("form").eq(0),b=a.prop("onsubmit");d.pt.isSameUrlpage(g.pageUrl,f.uploadDonePage)&&(g.isUploadDone=!0,g.hideOverlay=!1,h.find(".loadingOverlay").empty().append('<div class="ui-state-highlight" style="width:80%;">Upload Complete!</div>'));
a[0].onsubmit=function(){h.find(".loadingOverlay").css("display","block");var a=!0;d.isFunction(f.onPageChange)&&(a=f.onPageChange.call(h.closest(".hasSPControlUploadUI"),d.extend({},g,{state:3,action:"preLoad"})));if(!1===a)return h.find(".loadingOverlay").fadeOut(),a;d.isFunction(b)&&(a=b());!1===a&&h.find(".loadingOverlay").fadeOut();return a};d(h.find("iframe")[0].contentWindow).unload(function(a){h.find(".loadingOverlay").css("display","block");if(d.isFunction(f.onPageChange))return f.onPageChange.call(h.closest(".hasSPControlUploadUI"),
d.extend({},g,{state:3,action:"preLoad"}))})}f.onPageChange&&f.onPageChange.call(h.closest(".hasSPControlUploadUI"),g);"postload"==g.action.toLowerCase()&&!0!=g.hideOverlay||h.find(".loadingOverlay").fadeOut()},500)};d.pt.isSameUrlpage=function(b,d){if(!b||!d)return!1;var c=b;-1<b.indexOf("?")&&(c=b.substring(0,b.indexOf("?")));return 0==d.indexOf(c)?!0:!1};d.pt.getEscapedUrl=escapeProperly;d.pt.getUnEscapedUrl=unescapeProperly;d.pt.getListUID=function(b){if(!b)return"";var h="";if(d.pt._cache["getListUID:"+
b])return h=d.pt._cache["getListUID:"+b];d().SPServices({operation:"GetList",listName:b,async:!1,completefunc:function(b,f){h=d(b.responseXML).find("List").attr("ID")}});h&&(d.pt._cache["getListUID:"+b]=h);return h};d.pt.SPUploadStyleSheet="/**\n * FILE: jquery.SPControlUpload.css\n * \n * \n */\n.spcontrolupload .mainContainer {\n\tposition: relative;\n\tdisplay:block;\n}\n.spcontrolupload iframe {\n\toverflow: auto;\n\twidth: 99%;\n\theight: 99%;\n}\n.spcontrolupload iframe .ms-fileinput {\n\tfont-size:14pt;\n}\n\n.spcontrolupload .buttonPane {\n\tdisplay: none;\n}\n.spcontrolupload button {\n\tpadding: .5em;\n\tmargin: .2em;\n}\n.spcontrolupload .loadingOverlay {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: none;\n}\n.spcontrolupload .loadingOverlayMsg {\n\tmargin: auto;\n\tpadding: 5em;\n\tfont-size: 1.2em;\n}\n\n";
(function(b){var d={isInitDone:!1,templates:null};b.SPWidgets.defaults.filter={list:"",webURL:b().SPServices.SPGetCurrentSite(),columns:["Title"],textFieldTooltip:"Use a semicolon to delimiter multiple keywords.",definedClass:"spwidget-column-dirty",showFilterButton:!0,showFilterButtonTop:!0,filterButtonLabel:"Filter",onFilterClick:null,onReady:null,onReset:null,ignoreKeywords:/^(of|and|a|an|to|by|the|or|from)$/i};b.fn.SPFilterPanel=function(c){var f=arguments;d.isInitDone||(d.isInitDone=!0,""!==
d.styleSheet&&b('<style type="text/css">\n\n'+d.styleSheet+"\n\n</style>").prependTo("head"),d.templates=b(d.htmlTemplate));return"string"===typeof c?this.eq(0).hasClass("hasSPFilterPanel")?function(b){b=b.eq(0).find("div.spwidget-filter").data("SPFilterPanelInst");var a=c.toLowerCase(),k=b.$ele;switch(a){case "getfilter":k=d.getFilterValues(b);break;case "setfilter":d.setFilterValues(b,f[1]);break;case "reset":d.doResetFilter(b);break;case "destroy":b.$ele.removeClass("hasSPFilterPanel").empty()}return k}(this):
void 0:this.each(function(){var f=b.extend({},b.SPWidgets.defaults.filter,c),a={$ele:b(this),$ui:null,opt:f,getListDefinition:function(){return b.Deferred(function(a){b().SPServices({operation:"GetList",listName:f.list,cacheXML:!0,async:!0,webURL:f.webURL,completefunc:function(c,d){var f=b(c.responseXML);"error"===d?a.rejectWith(f,[c,d]):f.SPMsgHasError()?a.rejectWith(f,[c,d]):a.resolveWith(f,[c,d])}})}).promise()},buildWidget:function(){return b.Deferred(function(f){a.getListDefinition().then(function(e,
g){var n=this,q="",m=d.templates.filter("#filter_column").html();a.$ui=b(d.templates.filter("#filter_main_ui").html()).appendTo(a.$ele.empty().addClass("hasSPFilterPanel"));a.$list=n;b.each(a.opt.columns,function(c,e){var f=n.find("Field[DisplayName='"+e+"']"),g=m,k="",l={type:null,otherFilterTypes:""};f.length||(f=n.find("Field[Name='"+e+"']"));if(f.length){l.Name=f.attr("Name");switch(f.attr("Type")){case "Choice":f.find("CHOICES CHOICE").each(function(a,c){k+=b.SPWidgets.fillTemplate(d.templates.filter("#filter_choice_field").html(),
{DisplayName:f.attr("DisplayName"),Name:f.attr("Name"),value:b(c).text()})});g=g.replace(/__COLUMN__UI__/,k);g=b.SPWidgets.fillTemplate(g,{DisplayName:f.attr("DisplayName"),type:"choice",Name:f.attr("Name")});break;case "Lookup":case "LookupMulti":null===l.type&&(l.type="lookup",l.list=f.attr("List"),"Self"===l.list&&(l.list=n.find("List").attr("Title")));case "User":case "UserMulti":null===l.type&&(l.type="people");case "Counter":null===l.type&&(l.type="text",l.otherFilterTypes='<option value="Gt">Greater Than</option><option value="Lt">Less Than</option>');
case "DateTime":null===l.type&&(l.type="text",l.otherFilterTypes='<option value="Gt">After</option><option value="Lt">Before</option>');default:null===l.type&&(l.type="text"),k=d.templates.filter("#filter_text_field").html(),g=g.replace(/__COLUMN__UI__/,k).replace(/__OTHER_FILTER_TYPES__/,l.otherFilterTypes),g=b.SPWidgets.fillTemplate(g,b.extend(l,{DisplayName:f.attr("DisplayName"),Name:f.attr("Name"),tooltip:a.opt.textFieldTooltip}))}q+=g}});a.$ele.find("div.spwidget-filter-column-cntr").html(q);
a.$ele.find("div.spwidget-type-lookup input").each(function(){var a=b(this);a.SPLookupField({list:a.data("spwidget_list"),template:'<div>{{Title}} <span class="spwidgets-item-remove">[x]</span></div>',listTemplate:"{{Title}}",allowMultiples:!0,readOnly:!1,filter:""});a.parent().find(".spwidget-tooltip").remove()});a.$ele.find("div.spwidget-type-date input").datepicker({});a.opt.showFilterButton||a.opt.showFilterButtonTop?a.$ui.find("div.spwidget-filter-button-cntr").each(function(){var c=b(this),
e=b();a.opt.showFilterButtonTop&&(e=e.add(c.clone(!0)).prependTo(a.$ui));a.opt.showFilterButton?e=e.add(c):c.remove();e.find("button[name='filter']").button({icons:{primary:"ui-icon-search"},label:a.opt.filterButtonLabel}).on("click",d.onFilterButtonClick);e.find("button[name='reset']").button({icons:{primary:"ui-icon-arrowreturnthick-1-n"},text:!1}).on("click",function(b){d.doResetFilter(a);return this})}):a.$ui.find("div.spwidget-filter-button-cntr").remove();a.$ui.on("change.SPWigets.SPFilterPanel",
"select.spwidget-filter-type",d.onFilterTypeChange);if(""!==a.opt.definedClass)a.$ui.on("change.SPWidgets.SPFilterPanel",".spwidget-filter-input",d.onFilterInputChange);a.$ui.data("SPFilterPanelInst",a);b.isFunction(a.opt.onReady)&&a.opt.onReady.call(a.$ele,c);a.$ui.fadeIn().promise().then(function(){b(this).css("display","");f.resolve()})}).fail(function(b,c){a.$ele.html('<div class="ui-state-error">Unable to retrieve list information. '+this.SPGetMsgError()+"</div>");f.reject()})}).promise()}};
a.opt.ignoreKeywords&&!a.opt.ignoreKeywords instanceof RegExp&&(a.opt.ignoreKeywords=/Inst.opt.ignoreKeywords/i);a.buildWidget();return this})};d.onFilterInputChange=function(c){var d=b(this);c=d.closest("div.spwidget-filter-value-input");var g=c.closest("div.spwidget-column"),d=d.val(),a=c.closest("div.spwidget-filter").data("SPFilterPanelInst");g.is(".spwidget-type-choice")&&(c.find(".spwidget-filter-input:checked").length||(d=""));""!==d?g.addClass(a.opt.definedClass):g.removeClass(a.opt.definedClass);
return this};d.onFilterTypeChange=function(c){var d=b(this);c=d.closest("div.spwidget-column").find("div.spwidget-filter-value-cntr");var g=c.find(".spwidget-input"),d=d.val();"IsNull"===d||"IsNotNull"===d?(c.addClass("spwidget-disabled"),g.attr("disabled","disabled")):(c.removeClass("spwidget-disabled"),g.removeAttr("disabled","disabled"));return this};d.onFilterButtonClick=function(c){c=b(this).closest("div.spwidget-filter").data("SPFilterPanelInst");var f=null;b.isFunction(c.opt.onFilterClick)&&
(f=d.getFilterValues(c),c.opt.onFilterClick.call(c.$ele,f));return this};d.doResetFilter=function(c){if(b.isFunction(c.onReset)&&!0===c.onReset.call(c.$ele,d.getFilterValues(c)))return c;c.$ui.find("div[data-spwidget_column_type='text'] input").val("").end().find("div[data-spwidget_column_type='choice'] input").prop("checked",!1).end().find(".hasPickSPUser").pickSPUser("method","clear").end().find(".hasLookupSPField").SPLookupField("method","clear");""!==c.opt.definedClass&&c.$ui.find("."+c.opt.definedClass).removeClass(c.opt.definedClass);
return c};d.getFilterValues=function(c){function d(a){return b.SPWidgets.getCamlLogical({type:"OR",values:a.values,onEachValue:function(c){return"<"+a.matchType+"><FieldRef Name='"+a.columnName+"' /><Value Type='Text'>"+b.SPWidgets.escapeXML(c)+"</Value></"+a.matchType+">"}})}var g={CAMLQuery:"",URLParams:"",filters:{},count:0},a=[];c.$ui.find("div.spwidget-column").each(function(h,e){var l=b(e),n=l.find(".spwidget-input"),q=n.attr("name"),m={columnName:q,matchType:l.find("select.spwidget-filter-type").val(),
values:[],count:0,CAMLQuery:"",URLParams:""},l=l.data("spwidget_column_type"),t={};if("IsNull"===m.matchType||"IsNotNull"===m.matchType)m.CAMLQuery="<"+m.matchType+"><FieldRef Name='"+q+"' /></"+m.matchType+">",m.count+=1;else switch(l){case "choice":n.each(function(){var a=b(this),c=a.val();a.is(":checked")&&m.values.push(c)});m.values.length&&(m.count=m.values.length,m.CAMLQuery=d(m));break;case "lookup":case "people":(function(){var a=[];n.each(function(){var c=b(this),c=b.SPWidgets.parseLookupFieldValue(c.val()),
d,e;d=0;for(e=c.length;d<e;d++)c[d].id&&(m.values.push(c[d].id+";#"+c[d].title),a.push(c[d].id))});m.values.length&&(m.count=m.values.length,m.CAMLQuery=b.SPWidgets.getCamlLogical({type:"OR",values:a,onEachValue:function(a){return"<"+m.matchType+"><FieldRef Name='"+m.columnName+"' LookupId='True'/><Value Type='Lookup'>"+a+"</Value></"+m.matchType+">"}}))})();break;case "text":String(b.trim(n.val())).length&&function(){var a=n.val().split(";"),e,g,h;e=0;for(g=a.length;e<g;e++)h=b.trim(a[e]),!c.opt.ignoreKeywords.test(h)&&
h&&m.values.push(h);m.CAMLQuery=d(m);m.count=m.values.length}()}0<m.count&&(a.push(m.CAMLQuery),g.count+=m.count,g.filters[q]=m,t[q]={matchType:m.matchType,values:m.values},m.URLParams=b.param(t,!1),""!==g.URLParams&&(g.URLParams+="&"),g.URLParams+=m.URLParams)});1<g.count?g.CAMLQuery=b.SPWidgets.getCamlLogical({type:"AND",values:a}):1===g.count&&(g.CAMLQuery=a[0]);return g};d.setFilterValues=function(c,f){if("object"!==typeof f||b.isEmptyObject(f))return c;d.doResetFilter(c);b.each(f,function(d,
a){var f=c.$ui.find(".spwidget-filter-input[name='"+d+"']"),e=f.closest("div.spwidget-column"),h=e.data("spwidget_column_type"),e=e.find("select[name='"+d+"_type']");a.matchType&&e.val(a.matchType);switch(h){case "text":a.values instanceof Array?f.val(a.values.join(";")):f.val(a.values);break;case "choice":b.each(a.values,function(a,b){f.filter("[value='"+b+"']").prop("checked",!0)});break;case "lookup":f.SPLookupField("method","add",a.values.join(";#"));break;case "people":f.pickSPUser("method",
"add",a.values.join(";#"))}f.change()});return c};d.styleSheet="/** \n * Stylesheet for the Board widget\n * \n * BUILD: July 20, 2013 - 03:32 PM\n */\ndiv.spwidget-filter {\n    width: 100%;\n    position: relative;\n}\ndiv.spwidget-filter .spwidgets-lookup-cntr {\n    display: block;\n}\ndiv.spwidget-filter input[type='text'],\ndiv.spwidget-filter div.spwidget-type-choice div.spwidget-filter-value-input {\n    width: 97%;\n}\ndiv.spwidget-filter div.spwidget-column {\n    padding: .5em;\n    margin: .5em;\n    position: relative;\n    border-bottom: 1px solid  darkgray;\n    box-shadow: 1px 1px 1px 0 lightgray inset;\n}\ndiv.spwidget-filter div.spwidget-filter-type-cntr {\n    right: 4%;\n    margin-top: 0.2em;\n    position: absolute;\n    z-index: 5;\n}\ndiv.spwidget-filter div.spwidget-filter-value-cntr {\n    margin-top: .5em;\n    width: 100%;\n}\n\ndiv.spwidget-filter div.spwidget-filter-value-cntr > label {\n    display: block;\n    padding: .2em;\n    font-size: 1.1em;\n    font-weight: bold;\n}\ndiv.spwidget-filter div.spwidget-column-dirty div.spwidget-filter-value-cntr > label {\n    color: #FF0000;\n}\ndiv.spwidget-filter .spwidget-tooltip {\n    display: block;\n    font-size: .8em;\n    font-style: italic;\n}\n\n/* LOOKUP FIELDS */\ndiv.spwidget-filter div.spwidgets-lookup-cntr div.spwidgets-lookup-selected > div.spwidgets-item {\n    display: block;\n    margin-left: 0px;\n}\n\n/* CHOICE FIELDS */\ndiv.spwidget-filter div.spwidget-type-choice div.spwidget-filter-value-input {\n    max-height: 6em;\n    overflow: auto;\n    -moz-appearance: textfield;\n    -webkit-appearance: textfield;\n    background-color: white;\n    background-color: -moz-field;\n    border: 1px solid  darkgray;\n    box-shadow: 1px 1px 1px 0 lightgray inset;\n    font: -moz-field;\n    font: -webkit-small-control;\n    padding: 2px 5px;\n}\ndiv.spwidget-filter div.spwidget-type-choice div.spwidget-filter-value-input label {\n    display: block;\n    padding: .2em;\n}\n\n/** DISABLED COLUMN VALUE CONTAINER */\ndiv.spwidget-filter .spwidget-disabled {\n    -ms-filter: \"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)\";\n    filter: alpha(opacity=50);\n    opacity: 0.5;\n}\n\n/** Button container */\ndiv.spwidget-filter div.spwidget-filter-button-cntr {\n    padding: .5em 4%;\n    margin-top: .5em;\n    text-align: right;\n}\n\n";
d.htmlTemplate='<div id="filter_main_ui">\n    <div class="spwidget-filter" style="display: none;">\n        <div class="spwidget-filter-column-cntr"></div>\n        <div class="spwidget-filter-button-cntr">\n            <button type="button" class="spwidget-button" name=\'reset\'>Reset</button>\n            <button type="button" class="spwidget-button" name=\'filter\'>Filter</button>\n        </div>\n    </div>\n</div>\n<div id="filter_column">\n    <div class="spwidget-column spwidget-type-{{type}}" data-spwidget_column_type="{{type}}">\n        <div class="spwidget-filter-type-cntr" title="Match Type">\n            <select name="{{Name}}_type" class="spwidget-filter-type" tabindex="-1">\n                <option value="Contains" selected="selected">Contains</option>\n                <option value="Eq">Equal</option>\n                <option value="Neq">Not Equal</option>\n                <option value="IsNull">Is Blank</option> \n                <option value="IsNotNull">Is Not Blank</option>\n                __OTHER_FILTER_TYPES__\n            </select>\n        </div>\n        <div class="spwidget-filter-value-cntr">\n            <label>{{DisplayName}}</label>\n            <div class="spwidget-filter-value-input">\n                __COLUMN__UI__\n            </div>\n        </div>\n    </div>\n</div>\n<div id="filter_text_field">\n    <input name="{{Name}}" title="{{DisplayName}}" type="text" value="" data-spwidget_list="{{list}}" class="spwidget-input spwidget-filter-input" />\n    <span class="spwidget-tooltip">{{tooltip}}</span>\n</div>\n<div id="filter_choice_field">\n    <label>\n        <input name="{{Name}}" title="{{DisplayName}}" type="checkbox" value="{{value}}" class="spwidget-input spwidget-filter-input" />\n        {{value}}\n    </label>\n</div>\n'})(u)})(jQuery);
