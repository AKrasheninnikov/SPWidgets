(function(h){(function(){try{if(!h.pt)h.pt={}}catch(b){h.pt={}}if(h.pt._cache===undefined)h.pt._cache={};h.SPWidgets={};h.SPWidgets.version="20130630014913";h.SPWidgets.defaults={};h.fn.SPMsgHasError=function(){var c=h(this).find("ErrorCode"),e=false;if(!c.length)return h(this).find("faultcode").length?true:false;c.each(function(){if(h(this).text()!=="0x00000000"){e=true;return false}});return e};h.fn.SPGetMsgError=function(){var c=h(this),e="",g=c.find("ErrorCode"),d=0;g.length||(g=c.find("faultcode"));
if(!g.length)return"";g.each(function(){var f=h(this);if(f.text()!=="0x00000000"){d+=1;e+="("+d+") "+f.text()+": "+f.parent().children().not(f).text()+"\n"}});return e=d+" error(s) encountered! \n"+e};h.SPWidgets.fillTemplate=function(c,e){var g={},d,f,r,a,t;g.response="";g.template=String(h("<div/>").append(c).html());g.tokens=g.template.match(/(\{\{.*?\}\})/g);h.isArray(e)||(e=[e]);if(g.tokens!==null){r=0;for(a=e.length;r<a;r++){t=g.template;d=0;for(f=g.tokens.length;d<f;d++){g.tokens[d]=g.tokens[d].replace(/[\{\{\}\}]/g,
"");t=t.replace("{{"+g.tokens[d]+"}}",e[r][g.tokens[d]])}g.response+=t}}return g.response};h.SPWidgets.parseLookupFieldValue=function(c){var e=[],g=String(c).split(";#"),d=g.length,f,r;if(c===undefined)return e;for(c=0;c<d;c++){f=g[c];c++;r=g[c];if(f||r)e.push({id:f,title:r})}return e};h.SPWidgets.getCamlLogical=function(c){c=h.extend({},{type:"AND",values:[],onEachValue:null},c);var e="<And>",g="</And>",d="",f=0,r=0,a=false;c.type=String(c.type).toUpperCase();if(!h.isArray(c.values))c.values=[c.values];
if(c.type!=="AND"){e="<Or>";g="</Or>"}d=e;f=c.values.length;r=f-1;a=h.isFunction(c.onEachValue);if(f<2)d="";for(e=0;e<f;e++){d+=a?String(c.onEachValue(c.values[e])).toString():String(c.values[e]).toString();if(r-e>1){d+=h.SPWidgets.getCamlLogical(h.extend({},c,{values:c.values.splice(e+1,f-e)}));break}}if(f>1)d+=g;return d};h.SPWidgets.SPGetDateString=function(c,e){function g(f){return f<10?"0"+f:f}e=String(e||"local").toLowerCase();c=c||new Date;var d="";return d=e==="utc"?c.getUTCFullYear()+"-"+
g(c.getUTCMonth()+1)+"-"+g(c.getUTCDate())+"T"+g(c.getUTCHours())+":"+g(c.getUTCMinutes())+":"+g(c.getUTCSeconds())+"Z":c.getFullYear()+"-"+g(c.getMonth()+1)+"-"+g(c.getDate())+"T"+g(c.getHours())+":"+g(c.getMinutes())+":"+g(c.getSeconds())};h.SPWidgets.makeSameHeight=function(c,e){var g=0,d=h(c);d.each(function(){var f=h(this).css("height","");if(g<f.outerHeight(true))g=f.outerHeight(true)});if(g>0){if(e)g+=e;d.height(g)}return c};h.SPWidgets.escapeXML=function(c){if(typeof c!=="string")return"";
return c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;")};h.SPWidgets.unEscapeXML=function(c){if(typeof c!=="string")return"";return c.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"')}})(h);(function(b){var c={};c.initDone=false;c.maxColumns=20;b.SPWidgets.defaults.board={list:"",field:"",CAMLQuery:"<Query></Query>",CAMLViewFields:"",fieldFilter:null,optionalLabel:"(none)",template:null,
webURL:b().SPServices.SPGetCurrentSite(),showColPicker:false,colPickerLabel:"Columns",colPickerVisible:[],colPickerCloseLabel:"Close",colPickerApplyLabel:"Apply",colPickerCheckLabel:"Check-Uncheck All",colPickerTotalLabel:"Selected.",colPickerMaxColMsg:"Can not exceed 10 columns!",colPickerMinColMsg:"Mininum of 2 required!",onGetListItems:null,onPreUpdate:null,onBoardCreate:null};b.fn.SPShowBoard=function(e){if(!c.initDone){c.initDone=true;c.styleSheet!==""&&b('<style type="text/css">\n\n'+c.styleSheet+
"\n\n</style>").prependTo("head")}var g=arguments;return this.each(function(){var d=b(this),f=typeof e==="string",r=d.hasClass("hasSPShowBoard"),a=null,t="",n=null;if(r&&!f)return this;else if(f&&r&&!d.hasClass("loadingSPShowBoard")){t=e.toLowerCase();n=d.data("SPShowBoardOptions");if(t==="refresh")n._getListItems().then(function(){n.showItemsOnBoard({refresh:true})});else if(t==="redraw")n.setBoardColumnHeight();else t==="setvisible"&&n.showColPicker&&n.setUserDefinedVisibleCol(g[1]);return this}if(d.hasClass("loadingSPShowBoard"))return this;
a=b.extend({},b.SPWidgets.defaults.board,e,{ele:d,states:[],statesMap:{},tmpltHeader:"",tmpltState:"",statesCntr:"",headersCntr:"",listItems:[],initDone:false,formUrls:null,isStateRequired:true,maxColumnVisible:10,showNumberOfColumns:10,getBoardStates:function(){return b.Deferred(function(i){b().SPServices({operation:"GetList",listName:a.list,cacheXML:true,async:false,webURL:a.webURL,completefunc:function(j,m){var k=b(j.responseXML),l=k.find("Fields Field[StaticName='"+a.field+"']");if(!l.length){l=
k.find("Fields Field[DisplayName='"+a.field+"']");a.field=l.attr("StaticName")}if(l.attr("Required")==="FALSE")a.isStateRequired=false;switch(l.attr("Type").toLowerCase()){case "choice":if(!a.isStateRequired){a.states.push({type:"choice",title:a.optionalLabel,name:a.optionalLabel});a.statesMap[""]=a.states[a.states.length-1]}if(a.fieldFilter)a.fieldFilter=a.fieldFilter.split(/\,/);l.find("CHOICES CHOICE").each(function(p){var q=b(this).text();if(a.fieldFilter)if(!b.grep(a.fieldFilter,function(s){return s===
q}).length)return;if(p>=c.maxColumns){try{console.log("SPWIDGETS:BOARD:Warning: Can only build a max of "+c.maxColumns+" columns!")}catch(u){}return false}a.states.push({type:"choice",title:q,name:q});a.statesMap[q]=a.states[a.states.length-1]});i.resolveWith(a,[j,m]);break;case "lookup":if(!a.fieldFilter)a.fieldFilter="<Query></Query>";b().SPServices({operation:"GetListItems",listName:l.attr("List"),async:true,cacheXML:true,CAMLQuery:a.fieldFilter,webURL:a.webURL,CAMLRowLimit:c.maxColumns,CAMLViewFields:'<ViewFields><FieldRef Name="'+
l.attr("ShowField")+'" /></ViewFields>',completefunc:function(p,q){if(q==="error")i.rejectWith(d,["Communications Error!",p,q]);else{var u=b(p.responseXML);if(u.SPMsgHasError())i.rejectWith(d,[u.SPGetMsgError(),p,q]);else{if(!a.isStateRequired){a.states.push({type:"lookup",title:a.optionalLabel,name:""});a.statesMap[""]=a.states[a.states.length-1]}u.SPFilterNode("z:row").each(function(s){if(s>=c.maxColumns){try{console.log("SPWIDGETS:BOARD:Warning: Can only build a max of "+c.maxColumns+" columns!")}catch(w){}return false}var v=
b(this);s=v.attr("ows_ID");v=v.attr("ows_"+l.attr("ShowField"));s=s+";#"+v;a.states.push({type:"lookup",title:v,name:s});a.statesMap[s]=a.states[a.states.length-1]});i.resolveWith(a,[p,q])}}}})}}})}).promise()},_getListItems:function(){return b.Deferred(function(i){function j(m){b.isFunction(a.onGetListItems)&&a.onGetListItems.call(d,a.listItems,m);i.resolveWith(d,[a.listItems])}b.isFunction(a.CAMLQuery)?a.CAMLQuery.call(d,function(m){if(b.isArray(m)){a.listItems=m;j(a.CAMLQuery)}},e):b().SPServices({operation:"GetListItems",
listName:a.list,async:true,CAMLQuery:a.CAMLQuery,CAMLRowLimit:0,CAMLViewFields:a.CAMLViewFields,webURL:a.webURL,completefunc:function(m,k){if(k==="error")i.rejectWith(d,["Communications Error!",m,k]);else{var l=b(m.responseXML);if(l.SPMsgHasError())i.rejectWith(d,[l.SPGetMsgError(),m,k]);else{a.listItems=l.SPFilterNode("z:row").SPXmlToJson({includeAllAttrs:true});j(l)}}}})}).promise()},getBoardItemDataObject:function(i){var j=null,m,k,l;if(i){i=String(i);m=0;for(k=a.listItems.length;m<k;m++){l=a.listItems[m].ID;
if(b.isFunction(l))l=a.listItems[m].ID();l=String(l);if(i===l){j=a.listItems[m];m=k+k}}}return j},showItemsOnBoard:function(i){function j(y,z){var x="",A=null,B="";if(b.isFunction(a.template)){if(x=a.template.call(d,y,z))x=String(x)}else x=b.SPWidgets.fillTemplate(a.template,w);if(z!==undefined&&x!=="")z.html(x);else if(x!==""){A=y.ID;if(b.isFunction(y.ID))A=y.ID();if(p[u]===undefined)p[u]="";if(a.initDone&&m.refresh)B+=" spwidget-temp";p[u]+='<div class="spwidget-board-state-item ui-state-default ui-corner-all'+
B+'" data-id="'+A+'">'+x+"</div>"}return x}var m=b.extend({},{rows:a.listItems,refresh:false,doBoardInsert:true},i);i=[];var k=[],l=[],p={},q=null,u=null,s=q=null,w=null,v;if(!m.refresh){s=0;for(v=a.states.length;s<v;s++){a.states[s].headerTotalEle.html("0");a.states[s].dataEle.empty()}}s=0;for(v=m.rows.length;s<v;s++){w=m.rows[s];u=w[a.field]||"";q=w.ID;if(b.isFunction(u))u=w[a.field]();if(b.isFunction(q))q=q();if(a.statesMap[u])if(m.refresh===false){a.initDone&&i.push(w);j(w)}else{q=a.statesCntr.find("div[data-id='"+
q+"']");if(q.length){q.addClass("spwidget-temp");if(q.closest("div.spwidget-board-state").data("boardstate")!==u){q.appendTo(a.statesMap[u].dataEle);l.push(w)}j(w,q)}else{a.initDone&&i.push(w);j(w)}}}if(m.doBoardInsert){for(s in p)p.hasOwnProperty(s)&&p[s]!==""&&a.statesMap[s].dataEle.append(p[s]);a.updBoardHeaders();b.pt.addHoverEffect(d.find(".spwidget-board-state-item"))}a.initDone&&m.refresh&&a.statesCntr.find("div.spwidget-board-state-item").not("div.spwidget-temp").each(function(){k.push(a.getBoardItemDataObject(b(this).data("id")));
b(this).remove()}).end().removeClass("spwidget-temp");if(a.initDone){a.statesCntr.find("div.spwidget-board-state").sortable("refresh").end().disableSelection();a.setBoardColumnHeight();s=a.getEventObject();if(i.length){s.itemsModified.length=0;s.itemsModified.push(i);d.trigger("spwidget:boarditemadd",[d,b.extend({},s)])}if(k.length){s.itemsModified.length=0;s.itemsModified.push(k);d.trigger("spwidget:boarditemremove",[d,b.extend({},s)])}s.itemsModified.length=0;s.itemsModified.push.apply(s.itemsModified,
i);s.itemsModified.push.apply(s.itemsModified,k);s.itemsModified.push.apply(s.itemsModified,l);s.itemsModified.length&&d.trigger("spwidget:boardchange",[d,s])}return p},updBoardHeaders:function(i){var j;if(!b.extend({},{state:null},i).state){i=0;for(j=a.states.length;i<j;i++)a.states[i].headerTotalEle.html(a.states[i].dataEle.children().length)}},getEventObject:function(i){i||(i=a.statesCntr.find("div.spwidget-board-state-item:first"));i=b(i);i={stateTotals:{},itemTotal:0,currentState:i.closest("div.spwidget-board-state").data("boardstate"),
itemObj:a.getBoardItemDataObject(i.data("id"))||{},itemsModified:[]};var j,m;j=0;for(m=a.states.length;j<m;j++)i.itemTotal+=i.stateTotals[a.states[j].name]=Number(a.states[j].headerTotalEle.text());return i},getListFormUrl:function(i){function j(){b().SPServices({operation:"GetFormCollection",listName:a.list,webURL:a.webURL,cacheXML:true,async:false,completefunc:function(m){b(m.responseXML).find("Form").each(function(){var k=b(this);a.formUrls[String(k.attr("Type")).toLowerCase()]=a.webURL+"/"+k.attr("Url")})}})}
i=String(i).toLowerCase();if(a.formUrls===null){a.formUrls={};j()}return a.formUrls[i]||""},setBoardColumnClass:function(i){var j=a.headersCntr.add(a.statesCntr);i=parseInt(i);if(!i||i<2){i=0;b.each(a.states,function(m,k){k.isVisible&&i++})}if(a.showNumberOfColumns===i)return a;j.addClass("spwidget-states-"+i);a.showNumberOfColumns&&j.removeClass("spwidget-states-"+a.showNumberOfColumns);a.showNumberOfColumns=i;return a},setupColumnPicker:function(){var i=d.find(".spwidget-board-column-list-cntr"),
j=i.find("div.spwidget-board-column-list"),m=i.children("div.ui-state-default:last"),k={$totalCntr:i.find("span.spwidget-board-column-total")};k.setTotalSelected=function(){var l=k.getSelected().length;k.$totalCntr.html(l);return l};k.getSelected=function(){return j.find("a.ui-state-highlight")};k.showMessage=function(l){b('<div class="spwidget-board-msg ui-state-error ui-corner-all">'+l+"</div>").appendTo(m).fadeOut(8E3,function(){b(this).remove()})};k.setSelected=function(){var l=j.find("a");b.each(a.states,
function(p,q){var u=l.filter("[data-board_col_index='"+p+"']");q.isVisible?k.selectColumn(u,false):k.selectColumn(u,true)});k.setTotalSelected()};k.selectColumn=function(l,p){b(l).each(function(){var q=b(this),u=q.find(".ui-icon");if(q.hasClass("ui-state-highlight")||p){if(p!==false){u.removeClass("ui-icon-check");q.removeClass("ui-state-highlight")}}else{u.addClass("ui-icon-check");q.addClass("ui-state-highlight")}});return l};k.setVisibleColumns=function(l){l||(l=k.getSelected());var p=l.length;
b.each(a.states,function(q,u){if(l.filter("[data-board_col_index='"+q+"']").length){if(u.isVisible===false){u.isVisible=true;u.dataEle.css("display","");u.headerEle.css("display","")}}else{u.isVisible=false;u.dataEle.css("display","none");u.headerEle.css("display","none")}});a.setBoardColumnClass(p);a.setBoardColumnHeight()};k.setUserDefinedVisibleCol=a.setUserDefinedVisibleCol=function(l){var p=0,q="";if(b.isArray(l)){b.each(l,function(u,s){b.each(a.states,function(w,v){if(v.title===s){p++;if(p>
1)q+=",";q+="a[data-board_col_name='"+v.name+"']";return false}});if(p>=a.maxColumnVisible)return false});if(p>=2){k.setVisibleColumns(j.find(q));k.triggerEvent()}}};k.triggerEvent=function(){var l=[];if(a.initDone){b.each(a.statesMap,function(p,q){q.isVisible&&l.push(q.title)});a.ele.trigger("spwidget:boardColumnChange",[a.ele,l])}};i.find("button[name='apply']").button({label:a.colPickerApplyLabel,icons:{secondary:"ui-icon-circle-check"}}).on("click",function(){var l=k.getSelected(),p=l.length;
if(p>a.maxColumnVisible)k.showMessage(a.colPickerMaxColMsg);else if(p<2)k.showMessage(a.colPickerMinColMsg);else{i.hide();k.setVisibleColumns(l);k.triggerEvent()}});i.find("button[name='check']").attr("title",a.colPickerCheckLabel).button({text:false,icons:{primary:"ui-icon-check"}}).on("click",function(){var l=k.getSelected();l.length?k.selectColumn(l,true):k.selectColumn(j.find("a"));k.setTotalSelected()});i.find("button[name='close']").attr("title",a.colPickerCloseLabel).button({text:false,icons:{primary:"ui-icon-circle-close"}}).on("click",
function(){i.hide()});d.find("div.spwidget-board-settings").css("display","").find("div.spwidget-board-settings-columns").each(function(){var l=b(this);l.button({label:a.colPickerLabel,icons:{secondary:"ui-icon-triangle-1-s"}}).on("click.SPWidgets",function(){if(i.is(":visible"))i.hide();else{k.setSelected();i.show().position({my:"left top",at:"left bottom",of:l})}});return false});j.each(function(){var l=b(this),p="";b.each(a.states,function(q,u){p+='<a href="javascript:" data-board_col_index="'+
q+'" data-board_col_name="'+u.name+'"><span class="ui-icon ui-icon-minus"></span><span>'+u.title+"</span></a>"});l.html(p);return false}).on("click","a",function(){k.selectColumn(this);k.setTotalSelected()});i.find("span.spwidget-board-column-total-label").html(a.colPickerTotalLabel);b.isArray(a.colPickerVisible)&&a.colPickerVisible.length&&k.setUserDefinedVisibleCol(a.colPickerVisible)},setBoardColumnHeight:function(){a.statesCntr.is(":visible")&&b.SPWidgets.makeSameHeight(a.statesCntr.find("div.spwidget-board-state:visible"),
20);a.headersCntr.is(":visible")&&b.SPWidgets.makeSameHeight(a.headersCntr.find("div.spwidget-board-state:visible"),0)}});if(!a.list||!a.field){d.html("<div>SPWidgets:Board [ERROR] Missing required input parameters!</div>");return this}d.addClass("loadingSPShowBoard").data("SPShowBoardOptions",a);a.getBoardStates().then(function(){d.html(b(c.htmlTemplate).filter("div.spwidget-board"));a.tmpltHeader=b("<div/>").append(d.find("div.spwidget-board-headers-cntr div.spwidget-board-state").clone()).html();
a.tmpltState=b("<div/>").append(d.find("div.spwidget-board-states-cntr div.spwidget-board-state")).html();if(a.states.length<=a.maxColumnVisible)a.showNumberOfColumns=a.states.length;else a.showColPicker=true;a.statesCntr=d.find("div.spwidget-board-states-cntr").addClass("spwidget-states-"+a.showNumberOfColumns).empty();a.headersCntr=d.find("div.spwidget-board-headers-cntr").addClass("spwidget-states-"+a.showNumberOfColumns).empty();b.each(a.states,function(i,j){j.headerEle=b(a.tmpltHeader).appendTo(a.headersCntr).attr("data-boardstate",
j.name).attr("data-boardindex",i).html(j.title);j.dataEle=b(a.tmpltState).appendTo(a.statesCntr).attr("data-boardindex",i).attr("data-boardstate",j.name);j.headerTotalEle=b('<span>&nbsp;[<span class="spwidget-state-item-total">0</span>]</span>').appendTo(j.headerEle).find("span.spwidget-state-item-total");j.isVisible=true;if(i>a.maxColumnVisible-1){j.headerEle.css("display","none");j.dataEle.css("display","none");j.isVisible=false}});b(a.headersCntr,a.statesCntr).append('<div style="clear:both;"></div>');
a.showColPicker===true&&a.setupColumnPicker();d.on("sortreceive sortremove",function(i,j){a.updBoardHeaders();b(j.item).removeClass("ui-state-hover")}).on("sortreceive",function(i,j){var m=a.getEventObject(j.item),k=b.Deferred(),l="";l=b.isFunction(m.itemObj.ID)?m.itemObj.ID():m.itemObj.ID;m.updates=[];m.updatePromise=k.promise();m.updates.push([a.field,m.currentState]);if(b.isFunction(a.onPreUpdate))if(a.onPreUpdate.call(j.item,i,j.item,m)===true)return this;if(!m.updates.length)return this;b().SPServices({operation:"UpdateListItems",
listName:a.list,async:true,ID:l,valuepairs:m.updates,webURL:a.webURL,completefunc:function(p,q){if(q==="error")k.rejectWith(d,["Communications Error!",p,q]);else{var u=b(p.responseXML),s=null;if(u.SPMsgHasError())k.rejectWith(d,[u.SPGetMsgError(),p,q]);else{s=b(p.responseXML).SPFilterNode("z:row").SPXmlToJson({includeAllAttrs:true});b(i.target).trigger("spwidget:boardchange",[j.item,m]);k.resolveWith(i.target,[s[0],m.itemObj,p])}}}})}).on("click","a.spwidgets-board-action",function(i){i=b(i.currentTarget);
var j=String(i.data("spwidgets_board_action")).toLowerCase(),m="",k=b.pt.getEscapedUrl(window.location.href);switch(j){case "edit-item":m=a.getListFormUrl("EditForm");break;case "view-item":m=a.getListFormUrl("DisplayForm")}window.location.href=m+"?ID="+i.data("spwidgets_id")+"&Source="+k;return this});if(a.template===null)a.template=b(c.htmlTemplate).filter("div.spwidget-item-template");a._getListItems().then(function(){a.showItemsOnBoard();a.statesCntr.find("div.spwidget-board-state").each(function(){var i=
b(this);i.sortable({connectWith:i.siblings(),containment:d,cursor:"move",tolerance:"pointer",opacity:".80",placeholder:"ui-state-highlight spwidget-board-placeholder",forcePlaceholderSize:true,remove:function(){a.setBoardColumnHeight()}})});a.statesCntr.disableSelection();a.initDone=true;a.setBoardColumnHeight();d.addClass("hasSPShowBoard").removeClass("loadingSPShowBoard");b.isFunction(a.onBoardCreate)&&a.onBoardCreate.call(d,a.getEventObject());b(d).trigger("spwidget:boardcreate",[d,a.getEventObject()])})});
return this})};c.styleSheet="/** \n * Stylesheet for the Board widget\n * \n * BUILD: June 24, 2013 - 04:12 PM\n */\ndiv.spwidget-board {\n    width: 100%;\n    position: relative;\n}\n\ndiv.spwidget-board div.spwidget-board-headers,\ndiv.spwidget-board div.spwidget-board-headers-cntr,\ndiv.spwidget-board div.spwidget-board-states-cntr, \ndiv.spwidget-board div.spwidget-board-states {\n    width: 100%;\n}\n\ndiv.spwidget-board div.spwidget-board-state {\n    width: 49%;\n    float: left;\n    margin: .1%;\n    padding: .2%;\n    overflow: auto;\n}\n\ndiv.spwidget-board div.spwidget-board-headers-cntr {\n    border: none;\n}\ndiv.spwidget-board div.spwidget-board-headers-cntr div.spwidget-board-state {\n    text-align: center;\n    font-weight: bold;\n    font-size: 1.1em;\n    overflow: hidden;\n    word-wrap: break-word;\n}\ndiv.spwidget-board div.spwidget-board-states div.spwidget-board-state {\n    margin-bottom: 1em;\n    min-height: 10em;\n}\n\ndiv.spwidget-board div.spwidget-board-state div.spwidget-board-state-item {\n    padding: .2em;\n    margin: .5em .2em;\n    font-weight: normal;\n    cursor: move;\n    overflow: auto;\n}\ndiv.spwidget-board div.spwidget-board-state-item div.spwidget-board-item-actions{\n    margin-top: .5em;\n    padding: .2em .5em;\n    width: 25%;\n    overflow: hidden;\n    text-align: center;\n}\ndiv.spwidget-board .spwidget-board-placeholder {\n    height: 3em;\n}\n\n/** Setting container */\ndiv.spwidget-board-settings {\n    font-size: .8em;\n    margin: .2em;\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list-cntr {\n    z-index: 5;\n    position: absolute;\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list-cntr > div {\n    padding: .2em;\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list-cntr > div:first-child,\ndiv.spwidget-board-settings div.spwidget-board-column-list-cntr > div:last-child {\n    text-align: right;\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list {\n    width: 20em;\n    height: 17em;\n    overflow: auto;\n    position: relative\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list-cntr .spwidget-board-msg {\n    position: absolute;\n    top: 1px;\n    left: 1px;\n    padding: .2em;\n}\ndiv.spwidget-board-settings div.ui-state-default {\n    position: relative;\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list > a {\n    display: block;\n    margin: .2em;\n    padding: .2em;\n}\ndiv.spwidget-board-settings div.spwidget-board-column-list > a > span.ui-icon {\n    display: inline-block;\n}\n\n/* Number of Columns (96 % #columns)\n * Currently support 10 columns. \n */\ndiv.spwidget-board .spwidget-states-3 div.spwidget-board-state {\n    width: 32.4%;\n}\ndiv.spwidget-board .spwidget-states-4 div.spwidget-board-state {\n    width: 24%;\n}\ndiv.spwidget-board .spwidget-states-5 div.spwidget-board-state {\n    width: 19.1%;\n}\ndiv.spwidget-board .spwidget-states-6 div.spwidget-board-state {\n    width: 15.8%;\n}\ndiv.spwidget-board .spwidget-states-7 div.spwidget-board-state {\n    width: 13.4%;\n}\ndiv.spwidget-board .spwidget-states-8 div.spwidget-board-state {\n    width: 11.6%;\n}\ndiv.spwidget-board .spwidget-states-9 div.spwidget-board-state {\n    width: 10.2%;\n}\ndiv.spwidget-board .spwidget-states-10 div.spwidget-board-state {\n    width: 9.1%;\n}\n";
c.htmlTemplate='<div class="spwidget-board">\n    <div class="spwidget-board-settings" style="display:none;">\n        <div class=\'spwidget-board-settings-columns\'>Columns</div>\n        <div class="spwidget-board-column-list-cntr ui-widget-content ui-corner-all" style="display: none">\n            <div class="ui-state-default">\n                <span>\n                    <span class="spwidget-board-column-total"></span> \n                    <span class="spwidget-board-column-total-label">Selected.</span>\n                </span>\n                <button type="button" name="check" title="Check-Uncheck All">Check</button>\n                <button type="button" name="close" title="Close">Close</button>\n            </div>\n            <div class="spwidget-board-column-list">\n            </div>\n            <div class="ui-state-default">\n                <button type="button" name="apply">Apply</button>\n            </div>\n        </div>\n    </div>\n    <div class="spwidget-board-headers">\n        <div class="spwidget-board-headers-cntr ui-widget-content ui-corner-all">\n            <div class="spwidget-board-state ui-widget-content ui-corner-all"></div>\n            <div style="clear:both;"></div>\n        </div>\n    </div>\n    <div style="clear:both;"></div>\n    <div class="spwidget-board-states">\n        <div class="spwidget-board-states-cntr">\n            <div class="spwidget-board-state ui-widget-content ui-corner-all"></div>\n            <div style="clear:both;"></div>\n        </div>\n    </div>\n    <div style="clear:both;"></div>\n</div>\n<div class="spwidget-item-template">\n    <div>\n        <div>#{{ID}}: {{Title}}</div>\n        <div class="ui-state-active ui-corner-all spwidget-board-item-actions">\n            <a class="spwidgets-board-action" href="javascript:" title="View Item" data-spwidgets_id="{{ID}}" data-spwidgets_board_action="view-item"><img src="/_layouts/images/icgen.gif" border="0"/></a>\n            <a class="spwidgets-board-action" href="javascript:" title="Edit Item" data-spwidgets_id="{{ID}}" data-spwidgets_board_action="edit-item"><img src="/_layouts/images/CMSEditSourceDoc.GIF" border="0"/></a>\n        </div>\n    </div>\n</div>\n'})(h);
(function(b){var c={_islookupFieldCssDone:false};b.SPWidgets.defaults.LookupField={list:"",allowMultiples:true,inputLabel:"",inputPlaceholder:"Type and Pick",readOnly:false,exactMatch:true,uiContainer:null,selectFields:["Title"],filter:"",filterFields:["Title"],template:'<div>{{Title}} <span class="spwidgets-item-remove">[x]</span></div>',listTemplate:"{{Title}}",listHeight:0,onItemAdd:null,onItemRemove:null,onReady:null,msgNoItems:"",maxResults:50,minLength:2,hideInput:true,padDelimeter:false,showSelector:false};
b.fn.SPLookupField=function(e){if(!c._islookupFieldCssDone){c._islookupFieldCssDone=true;b('<style type="text/css">\n\n'+c.styleSheet+"\n\n</style>").prependTo("head")}var g=arguments;this.each(function(){var d=b(this);if(!d.is("input")&&!d.is("textarea")||d.hasClass("hasLookupSPField")){if(typeof e==="string"&&d.is("input")){var f=d.data("SPWidgetLookupFieldUI").data("SPWidgetLookupFieldOpt");if(e.toLowerCase()==="method"){d=String(g[1]||"").toLowerCase();var r=g[2]||{};if(d==="clear")if(r.id===
undefined){f._cntr.find("div.spwidgets-lookup-selected").css("display","none").empty();f._ele.val("").change();f._cntr.find("div.spwidgets-lookup-input").css("display","")}else alert("TBD... Delete individual ID's")}}return this}f=b.extend({},b.SPWidgets.defaults.LookupField,e,{_ele:d.css("display","none").addClass("hasLookupSPField")});f.showSelectedItems=function(n,i){var j=f._selectedItemsCntr.css("display",""),m=[],k=false;if(!j.find("div.spwidgets-item").length||f.allowMultiples===false)j.empty();
if(b.isArray(n))m=n;else m.push(n);b.each(m,function(l,p){if(!j.find("div.spwidgets-item-id-"+p.ID).length){var q=b('<div class="spwidgets-item spwidgets-item-id-'+p.ID+'" data-spid="'+p.ID+'" style="display:none">'+b.SPWidgets.fillTemplate(f.template,p)+"</div>").find(".spwidgets-item-remove").on("click.SPWidgets",function(){c.removeItem(f,this)}).end().appendTo(j);b.isFunction(f.onItemAdd)&&f.onItemAdd.call(f._ele,q,p,f._cntr);if(j.find("div.spwidgets-item-id-"+p.ID).length>0){k=true;q.fadeIn("slow").promise().then(function(){b(this).css("display",
"")});i!==true&&f.storeItemIDs(p.ID,f.allowMultiples);f.allowMultiples===false&&f.hideInput===true&&f._lookupInputEleCntr.css("display","none")}}});k&&f._ele.trigger("change")};f.storeItemIDs=function(n,i){var j=b.trim(f._ele.val()),m=false;b.isArray(n)||(n=[n]);if(i!==true)j="";b.each(n,function(k,l){if(l){if(j.length<1&&f.padDelimeter===true&&!m){j+=";#";m=true}if(j.length>0)j+=";#";j+=l+";#"}});f._ele.val(j)};f._cntr=b(c.htmlTemplate).find(".spwidgets-lookup-cntr").clone(1);f._selectedItemsCntr=
f._cntr.find("div.spwidgets-lookup-selected");f._lookupInputEleCntr=f._cntr.find("div.spwidgets-lookup-input");f._cntr.data("SPWidgetLookupFieldOpt",f);f._ele.data("SPWidgetLookupFieldUI",f._cntr);f.uiContainer===null?f._cntr.insertAfter(f._ele):f._cntr.appendTo(b(f.uiContainer));if(f.showSelector){var a=f._cntr.find("div.ptLookupSPFieldSelectorCntr");f._cntr.find(".ptLookupSPFieldSelector").on("click",function(){a.is(":visible")?a.css("display","none"):a.css("display","block")})}else f._cntr.find(".ptLookupSPFieldSelectorCntr,.ptLookupSPFieldSelector").remove();
f.inputLabel?f._cntr.find("div.spwidgets-lookup-input label").empty().append(f.inputLabel):f._cntr.find("div.spwidgets-lookup-input label").remove();f.inputPlaceholder&&f._lookupInputEleCntr.find("input").attr("placeholder",f.inputPlaceholder);if(f.readOnly===true){f._lookupInputEleCntr.css("display","none");f._cntr.find("div.spwidget-lookup").addClass("spwidget-lookup-readyonly")}f._selectFields="";b.each(f.selectFields,function(n,i){f._selectFields+="<FieldRef Name='"+i+"'/>"});f._templateTokens=
String(f.template).match(/(\$\{.*?\})/g);if(f._templateTokens==null)f._templateTokens=[];b.each(f._templateTokens,function(n,i){f._templateTokens[n]=i.replace(/[\$\{\}]/g,"")});var t={};f._cntr.find("div.spwidgets-lookup-input input").autocomplete({minLength:2,appendTo:f._cntr,open:function(){b(this).autocomplete("widget").each(function(){f.listHeight>0&&b(this).css("height",f.listHeight+"px");return false})},source:function(n,i){n.term=b.trim(n.term);var j=String(b.trim(n.term)).toUpperCase();if(j in
t)i(t[j]);else{t[j]=[];var m=[],k=String(n.term);if(k.match(/\D/)===null&&k.match(/\d/)!==null)m.push("<Eq><FieldRef Name='ID'/><Value Type='Counter'>"+k+"</Value></Eq>");else{k=[n.term];f.exactMatch||(k=String(n.term).split(/ /));for(var l=0,p=f.filterFields.length;l<p;l++){for(var q=[],u=0,s=k.length;u<s;u++)/^(of|and|a|an|to|by|the|or)$/i.test(k[u])||q.push("<Contains><FieldRef Name='"+f.filterFields[l]+"'/><Value Type='Text'>"+k[u]+"</Value></Contains>");m.push(b.SPWidgets.getCamlLogical({values:q,
type:"AND"}))}}m=b.SPWidgets.getCamlLogical({values:m,type:"OR"});if(f.filter)m=b.SPWidgets.getCamlLogical({values:[m,f.filter],type:"AND"});b().SPServices({operation:"GetListItems",listName:f.list,async:true,CAMLQuery:"<Query><Where>"+m+"</Where></Query>",CAMLRowLimit:f.maxResults,CAMLViewFields:"<ViewFields>"+f._selectFields+"</ViewFields>",completefunc:function(w){b(w.responseXML).SPFilterNode("z:row").each(function(){var v=b(this).SPXmlToJson({includeAllAttrs:true})[0];v.value="";v.label=b.SPWidgets.fillTemplate(f.listTemplate,
v);t[j].push(v)});i(t[j])}})}},select:function(n,i){f.showSelectedItems(i.item)}}).on("keyup.SPWidgets",function(n){if(n.which==13){var i=b(n.target).val();i&&String(i).length<f.minLength&&b(n.target).autocomplete("search",i+"    ")}});d=b.SPWidgets.parseLookupFieldValue(f._ele.val());if(d.length)b().SPServices({operation:"GetListItems",async:true,listName:f.list,CAMLQuery:"<Query><Where>"+b.SPWidgets.getCamlLogical({type:"OR",values:d,onEachValue:function(n){var i="";if(n.id)i="<Eq><FieldRef Name='ID'/><Value Type='Counter'>"+
n.id+"</Value></Eq>";return i}})+"</Where></Query>",CAMLViewFields:"<ViewFields>"+f._selectFields+"</ViewFields>",CAMLRowLimit:0,completefunc:function(n){n=b(n.responseXML).SPFilterNode("z:row").SPXmlToJson({includeAllAttrs:true,removeOws:true});f.showSelectedItems(n,true);f.readOnly&&f._cntr.find(".spwidgets-item-remove").remove();b.isFunction(f.onReady)&&f.onReady.call(f._ele,f._cntr);return this}});else b.isFunction(f.onReady)&&f.onReady.call(f._ele,f._cntr);return this});return this};c.removeItem=
function(e,g){var d=b(g).closest("div.spwidgets-item"),f=d.closest("div.spwidgets-lookup-selected"),r=d.data("spid"),a=b.SPWidgets.parseLookupFieldValue(e._ele.val()),t=[],n=0,i=0;d.fadeOut("fast").promise().then(function(){d.remove();if(!e.msgNoItems&&(e.allowMultiples===false||e.allowMultiples===true&&f.find("div.spwidgets-item").length<1))f.css("display","none");e.allowMultiples===false&&e.hideInput===true&&e._lookupInputEleCntr.css("display","");f.find("div.spwidgets-item").length<1&&e.msgNoItems&&
f.append("<div>"+e.msgNoItems+"</div>")});n=0;for(i=a.length;n<i;n++)a[n].id!=r&&t.push(a[n].id);e._lookupInputEleCntr.find("input").focus();e.storeItemIDs(t);e._ele.change();return c};c.styleSheet='/**\n * Stylesheet for the Lookup Field widget.\n * \n */\n\n.spwidgets-lookup-cntr {\n    position: relative;\n    display: inline-block;\n    zoom: 1; /* IE7 hack */\n    *display: inline; /* IE7 hack */\n}\n\n\n.spwidgets-lookup-cntr .spwidgets-lookup-selected {\n    -moz-appearance: textfield;\n    -webkit-appearance: textfield;\n    background-color: white;\n    background-color: -moz-field;\n    border: 1px solid  darkgray;\n    box-shadow: 1px 1px 1px 0 lightgray inset;  \n    font: -moz-field;\n    font: -webkit-small-control;\n    margin-top: 5px;\n    padding: 2px 5px; \n}\n\n.spwidgets-lookup-cntr  .spwidgets-lookup-selected .spwidgets-item {\n    display: inline-block;\n    margin-left: .5em;\n}\n.spwidgets-lookup-cntr .spwidgets-item:first-child {\n    margin-left: 0px;\n}\n.spwidgets-lookup-cntr .spwidgets-item-remove {\n    color: red;\n    cursor: pointer;\n}\n\n.spwidgets-lookup-cntr .spwidgets-lookup-input {\n    margin: .2em 0em;\n    position: relative;\n}\n.spwidgets-lookup-cntr .ptLookupSPFieldSelector {\n    height: 16px;\n    width: 16px;\n    text-indent: -99999px;\n    background-repeat: no-repeat;\n    background-image: url("/_layouts/images/ARRDOWNI.GIF");\n    display: inline-block;\n}\n.spwidgets-lookup-cntr .ptLookupSPFieldSelectorCntr {\n    display: none;\n    position: absolute;\n    height: 150px;\n    width: 98%;\n    left: 0px;\n    overflow: auto;\n    z-index: 2000;\n}\n.spwidgets-lookup-cntr ul.ui-autocomplete {\n    overflow: auto;\n}\n\n/* Ready only display */\n.spwidgets-lookup-cntr div.spwidget-lookup-readyonly .spwidgets-lookup-selected {\n    -moz-appearance: none;\n    -webkit-appearance: none;\n    background-color: transparent;\n    border: none;\n    box-shadow: none;\n    font: inherit;\n}\n.spwidgets-lookup-cntr div.spwidget-lookup-readyonly .spwidgets-item-remove {\n    display: none;\n}\n';
c.htmlTemplate='<div>\n    <div class="spwidgets-lookup-cntr">\n        <div class="spwidget-lookup">\n            <div class="spwidgets-lookup-selected" style="display:none;">\n            </div>\n            <div class="spwidgets-lookup-input">\n                <label>Add</label>\n                <input type="text" name="ptLookupSPFieldAdd" value="" />\n                <span class="ptLookupSPFieldSelector">Select</span>\n                <div class="ptLookupSPFieldSelectorCntr ui-widget-content">\n                    <div style="height: 1000px;"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n'})(h);
h.pt.pickSPUser={_isPickSPUserCssDone:false};h.fn.pickSPUser=function(b){if(!h.pt.pickSPUser._isPickSPUserCssDone){h.pt.pickSPUser._isPickSPUserCssDone=true;h('<style type="text/css">\n\n'+h.pt.pickSPUser.styleSheet+"\n\n</style>").prependTo("head")}var c=arguments;this.each(function(){var e=h(this);if(!e.is("input")||e.hasClass("hasPickSPUser"))return typeof b==="string"&&e.is("input")?h.pt.pickSPUser.handleAction.apply(this,c):this;var g=h.extend({},{allowMultiples:true,maxSearchResults:50,webURL:h().SPServices.SPGetCurrentSite(),
onPickUser:null,onCreate:null,onRemoveUser:null,inputPlaceholder:"Type and Pick"},b,{eleUserInput:e.css("display","none").addClass("hasPickSPUser")});g.maxSearchResults=parseInt(g.maxSearchResults)||50;var d=h(h.pt.pickSPUser.htmlTemplate).find(".pt-pickSPUser").clone(1).insertAfter(e);g.eleSelected=d.find("div.pt-pickSPUser-selected").empty();g.elePickInput=d.find("div.pt-pickSPUser-input");g.addPeopleToList=function(r,a){var t=(new String(r)).split(";#"),n=t.length,i,j,m;for(i=0;i<n;i++){j=t[i];
i++;m=t[i];j=h.pt.pickSPUser.getUserHtmlElement(g,j,m).appendTo(g.eleSelected);(function(k,l){g.getSearchResults(l).done(function(p){var q=String(l).toLowerCase();h.each(p,function(u,s){if(String(s.displayName).toLowerCase()===q){k.data("pickspuser_object",s);return false}})})})(j,m)}h.pt.addHoverEffect(g.eleSelected.find("div.pt-pickSPUser-person-cntr"));g.allowMultiples===false&&g.elePickInput.css("display","none");h.pt.pickSPUser.storeListOfUsers(g.eleSelected,a)};g.getSearchResults=function(r){return h.Deferred(function(a){h().SPServices({operation:"SearchPrincipals",
searchText:r,maxResults:g.maxSearchResults,async:true,webURL:g.webURL,completefunc:function(t,n){var i=[];h(t.responseXML).find("PrincipalInfo").each(function(){var j=h(this);i.push({displayName:j.find("DisplayName").text(),accountId:j.find("UserInfoID").text(),accountName:j.find("AccountName").text(),accountType:j.find("PrincipalType").text(),value:j.find("DisplayName").text(),label:j.find("DisplayName").text()})});a.resolveWith(t,[i,t,n])}})}).promise()};g.allowMultiples===true&&g.eleSelected.addClass("pt-pickSPUser-selected-multiple");
e.val()&&g.addPeopleToList(e.val(),noEvents);var f={};g.elePickInput.find("input[name='pickSPUserInputField']").attr("placeholder",g.inputPlaceholder).autocomplete({minLength:3,source:function(r,a){if(r.term in f)a(f[r.term]);else{f[r.term]=[];g.getSearchResults(r.term).then(function(t){f[r.term].push.apply(f[r.term],t);a(f[r.term])})}},select:function(r,a){if(g.allowMultiples===false)g.eleSelected.empty();else if(g.eleSelected.find("div[data-pickspuserid='"+a.item.accountId+"']").length)return;h.pt.pickSPUser.getUserHtmlElement(g,
a.item.accountId,a.item.displayName).appendTo(g.eleSelected).data("pickspuser_object",a.item);h.pt.pickSPUser.storeListOfUsers(d);h.pt.addHoverEffect(d.find("div.pt-pickSPUser-person-cntr"));setTimeout(function(){r.target.value=""},50);g.allowMultiples===false&&g.elePickInput.hide();h.isFunction(g.onPickUser)&&g.onPickUser.call(g.eleUserInput,h.extend({},a.item));e.trigger(h.Event("spwidget:peoplePickerAdd"),[g.eleUserInput,h.extend({},a.item)])}});d.data("pickSPUserContainerOpt",g);e.data("pickSPUserContainer",
d);h.isFunction(g.onCreate)&&g.onCreate.call(e,e);e.trigger(h.Event("spwidget:peoplePickerCreate"),[g.eleUserInput]);return this});return this};h.pt.pickSPUser.getUserHtmlElement=function(b,c,e){b=h(h.pt.pickSPUser.htmlTemplate).find(".pt-pickSPUser-person").clone(1);b.attr("data-pickSPUserID",c);b.find("span.pt-person-name").append(e).end().attr("data-pickSPUserNAME",e);return b};h.pt.pickSPUser.removeUser=function(b){var c=h(b).closest("div.pt-pickSPUser"),e=c.data("pickSPUserContainerOpt");b=h(b).closest("div.pt-pickSPUser-person");
var g=b.data("pickspuser_object");h.isFunction(e.onRemoveUser)&&e.onRemoveUser.call(e.ele,e.ele,b,g);b.fadeOut("fast",function(){h(this).remove();h.pt.pickSPUser.storeListOfUsers(c)});e.allowMultiples===false&&e.elePickInput.show("fast",function(){e.elePickInput.find("input").focus()});e.eleUserInput.trigger(h.Event("spwidget:peoplePickerRemove"),[e.eleUserInput,g])};h.pt.pickSPUser.storeListOfUsers=function(b,c){var e=h(b).closest("div.pt-pickSPUser"),g=e.data("pickSPUserContainerOpt"),d="",f={};
e.find("div.pt-pickSPUser-selected div.pt-pickSPUser-person").each(function(){if(!f[h(this).attr("data-pickSPUserID")]){f[h(this).attr("data-pickSPUserID")]=true;if(d)d+=";#";d+=h(this).attr("data-pickSPUserID");d+=";#";d+=h(this).attr("data-pickSPUserNAME")}});g.eleUserInput.val(d);c||g.eleUserInput.change()};h.pt.pickSPUser.handleAction=function(b,c,e){b=String(b).toLowerCase();c=String(c).toLowerCase();o=h(this).data("pickSPUserContainer").data("pickSPUserContainerOpt");ret=this;if(b==="method")switch(c){case "clear":o.eleUserInput.val("");
o.eleSelected.empty();if(o.allowMultiples===false){o.eleSelected.css("display","none");o.elePickInput.show()}break;case "destroy":h(this).hasClass("hasPickSPUser")&&h(this).removeClass("hasPickSPUser").next(".pt-pickSPUser").remove().show().trigger("change");break;case "add":o.addPeopleToList(e);break;case "remove":if(e){b=o.eleSelected.find("div[data-pickspuserid='"+e+"']");b.length||(b=o.eleSelected.find("div[data-pickspusername='"+e+"']"));b.length&&h.pt.pickSPUser.removeUser(b)}break;case "getSelected":ret=
h.SPWidgets.parseLookupFieldValue(o.eleUserInput.val())}return ret};h.pt.pickSPUser.styleSheet="/**\n * Styles for the Pick User Widget\n */\n.pt-pickSPUser .pt-pickSPUser-selected-multiple {\n    min-height: 3em;\n}\n\n.pt-pickSPUser .pt-pickSPUser-selected .pt-pickSPUser-person {\n    float: left;\n    margin-left: .2em;\n}\n.pt-pickSPUser .pt-pickSPUser-hint {\n    font-size: .9em;\n}\n\n\n.pt-pickSPUser .pt-pickSPUser-person-cntr {\n    margin: .2em 0em;\n    padding: .2em;\n    position: relative;\n}\n\n.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-person-name {\n    padding-right: 2em;\n}\n\n/* Item action container (delete button) */\n.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-pickSPUser-person-actions {\n    position: absolute;\n    right: 1px;\n    top: 1px;\n    padding: .2em;\n    display: none;\n}\n.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-pickSPUser-person-actions .pt-pickSPUser-person-action-links,\n.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-pickSPUser-person-actions .pt-pickSPUser-person-action-links .tt-confirm-delete {\n    float:right;\n}\n\n/* Make the action visible if we hover or we are trying to confirm a deletion */\n.pt-pickSPUser .pt-pickSPUser-person-cntr.ui-state-hover .pt-pickSPUser-person-actions,\n.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-pickSPUser-person-actions.tt-confirm,\n.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-pickSPUser-person-actions a {\n    display:block;\n    float: right;\n}\n\n/* autocomplete busy image */\n.ui-autocomplete-loading {\n    background: white url('/_layouts/images/loading.gif') right center no-repeat;\n}\n\n\n";
h.pt.pickSPUser.htmlTemplate='<!--\n    Html Templates for the PickSPUser plugin.\n    \n    |\n    |   $Author$\n    | $Revision$\n    |     $Date$\n    |       $Id$\n    |\n--\>\n<div>\n    <div class="pt-pickSPUser">\n        <div class="pt-pickSPUser-selected">\n            None Selected!\n        </div>\n        <div style="clear:both"></div>\n        <div class="pt-pickSPUser-input" \n                title="Type user name above to view search results.">\n            <input name="pickSPUserInputField" value="" type="text"/>\n        </div>\n    </div>\n    \n    <div class="pt-pickSPUser-person">\n        <div class="pt-pickSPUser-person-cntr ui-state-default ui-corner-all">\n            <span class="pt-person-name"></span>\n            <div class="pt-pickSPUser-person-actions">\n                <div class="tt-record-item-action-links">\n                    <a class="tt-delete-icon" href="javascript:" onclick="jQuery.pt.pickSPUser.removeUser(this);">\n                        <img style="border: medium none; margin-right: 2px;" alt="Delete" src="/_layouts/images/delitem.gif">\n                    </a>\n                    <div style="clear:both;"></div>\n                </div>\n                <div style="clear:both;"></div>\n            </div>\n        </div>\n    </div>\n</div>\n';
h.pt.addHoverEffect=function(b){return h(b).each(function(){if(!h(this).hasClass("addHoverEffectDone")){h(this).addClass("addHoverEffectDone");var c=this;h(c).mouseenter(function(){h(c).toggleClass("ui-state-hover")});h(c).mouseleave(function(){h(c).toggleClass("ui-state-hover")})}})};h.pt._isSPUploadCssDone=false;h.fn.SPControlUpload=function(b){var c=h.extend({},{listName:"",folderPath:"",uploadDonePage:"/_layouts/viewlsts.aspx",onPageChange:null,uploadUrlOpt:"",overwrite:false,uploadPage:"/_layouts/Upload.aspx",
overlayClass:"",overlayBgColor:"white",overlayMessage:'<div class="loadingOverlayMsg">Loading...</div>'},b);if(!h.pt._isSPUploadCssDone){h.pt._isSPUploadCssDone=true;h('<style type="text/css">\n\n'+h.pt.SPUploadStyleSheet+"\n\n</style>").prependTo("head")}if(c.listName&&c.listName.indexOf("{")!=0)c.listName=h.pt.getListUID(c.listName);if(!c.listName){h(this).html('<div class="ui-state-error">Input parameter [listName] not valid!</div>');return this}c.siteUrl=h().SPServices.SPGetCurrentSite();if(String(c.uploadPage).toLowerCase().indexOf("http")==
-1){b="/";if(c.uploadPage.indexOf("/")==0)b="";c.uploadPage=c.siteUrl+b+c.uploadPage;c.uploadPage2=c.siteUrl+"/_layouts/UploadEx.aspx"}if(String(c.uploadDonePage).toLowerCase().indexOf("http")==-1){b="/";if(c.uploadDonePage.indexOf("/")==0)b="";c.uploadDonePage=c.siteUrl+b+c.uploadDonePage}c._uploadUrlParams="?List="+h.pt.getEscapedUrl(c.listName)+"&RootFolder="+h.pt.getEscapedUrl(c.folderPath)+"&Source="+h.pt.getEscapedUrl(c.uploadDonePage)+"&"+c.uploadUrlOpt;c.uploadPage+=c._uploadUrlParams;c.uploadPage2+=
c._uploadUrlParams;c._lastError="";c._reloadCount=0;c.ev={state:1,action:"uploading",hideOverlay:true,pageUrl:"",page:null,isUploadDone:false};var e="";if(c.overlayBgColor)e="style='background-color:"+c.overlayBgColor+";' ";h(this).each(function(){var g=h(this),d=g.outerHeight()-75,f={top:0,left:0,height:g.outerHeight(true)-15,display:"block"};g.empty().addClass("hasSPControlUploadUI").append("<div class='SPControlUploadUI spcontrolupload'><div class='mainContainer'><div class='iFrameWindow'><iframe name='SPControlUploadUI' frameborder='0' scrollbars='yes' scrolling='yes'></iframe></div><div class='buttonPane'><button type='button' class='ui-state-default' name='upload_button' value='upload' onclick='$.pt._onUpload(this);'>Upload</button></div><div class='loadingOverlay "+
c.overlayClass+"' "+e+"></div></div></div>").find(".SPControlUploadUI").data("SPControlUploadOptions",c).end().find("iframe").css("height",d).load(function(){h.pt._onIFramePageChange(g.find(".SPControlUploadUI"))}).attr("src",c.uploadPage).end().find(".loadingOverlay").append(c.overlayMessage).css(f);return this});return this};h.pt._onUpload=function(b){var c=h(b).closest(".SPControlUploadUI"),e=c.find("iframe").contents(),g=e.find("input[type='file']").closest("tr").siblings().find("span");b=c.data("SPControlUploadOptions");
var d=b.ev;g.css("display","none");if(e.find("input[type='file']").val()){d.state=2;d.action="preLoad";if(b.onPageChange)if(b.onPageChange.call(c.closest(".hasSPControlUploadUI"),d)===false)return false;c.find(".buttonPane").css("display","none").end().find(".loadingOverlay").fadeIn("slow",function(){e.find("input[type='button'][id$='btnOK']").click();if(g.is(":visible")){c.find(".loadingOverlay").css("display","none").end().find(".buttonPane").show(0).end();return false}})}};h.pt._onIFramePageChange=
function(b){var c=h(b).closest(".SPControlUploadUI"),e=c.find("iframe").contents(),g=c.data("SPControlUploadOptions"),d=g.ev;d.pageUrl=e[0].location.href;d.page=e;setTimeout(function(){if(h.pt.isSameUrlpage(h.pt.getUnEscapedUrl(d.pageUrl),h.pt.getUnEscapedUrl(g.uploadPage))||h.pt.isSameUrlpage(h.pt.getUnEscapedUrl(d.pageUrl),h.pt.getUnEscapedUrl(g.uploadPage2))){e.find("form").children(":visible").hide();e.find("form").append("<div id='SPControlUploadModUI' style='position:absolute;width:99.9%;height:99.9%x;left:0px;top:0px;background-color:white;padding-top:3em;'></div>");
if(RegExp(/error/i).test(h.trim(e.find(".ms-pagetitle").text()))||RegExp(/error/i).test(h.trim(e.find("title").text()))||RegExp(/error\.aspx/i).test(h.trim(e.find("form").attr("action")))){g._lastError=e.find("[id$='LabelMessage']").text();if(g._reloadCount>1){alert("Error encountered during upload which is causing program to loop. Last upload error was: "+g._lastError);c.find(".loadingOverlay").fadeOut();return}g._reloadCount+=1;c.find("iframe").attr("src",g.uploadPage);return}else{if(e.find("#GearPage")&&
!e.find("input[type='file']").length)return;e.find("input[type='file']").closest("table").appendTo(e.find("#SPControlUploadModUI")).removeClass("ms-authoringcontrols").find("a[id$='UploadMultipleLink']").closest("tr").css("display","none").end().end().find("input[type='checkbox'][name$='OverwriteSingle']").closest("tr").css("display","none").end().end().find(".ms-fileinput").css("font-size","13pt");if(g._lastError){e.find("input[type='file']").after('<div style="color:red;"><div class="ui-state-error">ERROR: '+
g._lastError+"</div></div>");g._lastError=""}g._reloadCount=0;g.overwrite?e.find("input[type='checkbox'][name$='OverwriteSingle']").prop("checked","checked"):e.find("input[type='checkbox'][name$='OverwriteSingle']").prop("checked","");c.find(".buttonPane").show();d.state=1;d.action="postLoad";d.hideOverlay=true}}else{d.state=3;d.action="postLoad";d.hideOverlay=true;var f=e.find("form").eq(0),r=f.prop("onsubmit");if(h.pt.isSameUrlpage(d.pageUrl,g.uploadDonePage)){d.isUploadDone=true;d.hideOverlay=
false;c.find(".loadingOverlay").empty().append('<div class="ui-state-highlight" style="width:80%;">Upload Complete!</div>')}f[0].onsubmit=function(){c.find(".loadingOverlay").css("display","block");var a=true;if(h.isFunction(g.onPageChange))a=g.onPageChange.call(c.closest(".hasSPControlUploadUI"),h.extend({},d,{state:3,action:"preLoad"}));if(a===false){c.find(".loadingOverlay").fadeOut();return a}if(h.isFunction(r))a=r();if(a===false){c.find(".loadingOverlay").fadeOut();return a}return a};h(c.find("iframe")[0].contentWindow).unload(function(){c.find(".loadingOverlay").css("display",
"block");if(h.isFunction(g.onPageChange))return g.onPageChange.call(c.closest(".hasSPControlUploadUI"),h.extend({},d,{state:3,action:"preLoad"}))})}g.onPageChange&&g.onPageChange.call(c.closest(".hasSPControlUploadUI"),d);if(d.action.toLowerCase()!="postload"||d.hideOverlay==true)c.find(".loadingOverlay").fadeOut()},500)};h.pt.isSameUrlpage=function(b,c){if(!b||!c)return false;var e=b;if(b.indexOf("?")>-1)e=b.substring(0,b.indexOf("?"));return c.indexOf(e)==0?true:false};h.pt.getEscapedUrl=escapeProperly;
h.pt.getUnEscapedUrl=unescapeProperly;h.pt.getListUID=function(b){if(!b)return"";var c="";if(h.pt._cache["getListUID:"+b])return c=h.pt._cache["getListUID:"+b];h().SPServices({operation:"GetList",listName:b,async:false,completefunc:function(e){c=h(e.responseXML).find("List").attr("ID")}});if(c)h.pt._cache["getListUID:"+b]=c;return c};h.pt.SPUploadStyleSheet="/**\n * FILE: jquery.SPControlUpload.css\n * \n * \n */\n.spcontrolupload .mainContainer {\n\tposition: relative;\n\tdisplay:block;\n}\n.spcontrolupload iframe {\n\toverflow: auto;\n\twidth: 99%;\n\theight: 99%;\n}\n.spcontrolupload iframe .ms-fileinput {\n\tfont-size:14pt;\n}\n\n.spcontrolupload .buttonPane {\n\tdisplay: none;\n}\n.spcontrolupload button {\n\tpadding: .5em;\n\tmargin: .2em;\n}\n.spcontrolupload .loadingOverlay {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: none;\n}\n.spcontrolupload .loadingOverlayMsg {\n\tmargin: auto;\n\tpadding: 5em;\n\tfont-size: 1.2em;\n}\n\n";
(function(b){var c={};c.isInitDone=false;c.templates=null;b.SPWidgets.defaults.filter={list:"",webURL:b().SPServices.SPGetCurrentSite(),columns:["Title"],textFieldTooltip:"Use a semicolon to delimiter multiple keywords.",definedClass:"spwidget-column-dirty",showFilterButton:true,showFilterButtonTop:true,filterButtonLabel:"Filter",onFilterClick:null,onReady:null,onReset:null,ignoreKeywords:/^(of|and|a|an|to|by|the|or|from)$/i};b.fn.SPFilterPanel=function(e){if(!c.isInitDone){c.isInitDone=true;c.styleSheet!==
""&&b('<style type="text/css">\n\n'+c.styleSheet+"\n\n</style>").prependTo("head");c.templates=b(c.htmlTemplate)}if(typeof e==="string"){if(!this.eq(0).hasClass("hasSPFilterPanel"))return;return function(g){g=g.eq(0).find("div.spwidget-filter").data("SPFilterPanelInst");var d=e.toLowerCase(),f=g.$ele;switch(d){case "getfilter":f=c.getFilterValues(g);break;case "reset":c.doResetFilter(g);break;case "destroy":g.$ele.removeClass("hasSPFilterPanel").empty()}return f}(this)}return this.each(function(){var g=
b.extend({},b.SPWidgets.defaults.filter,e),d={$ele:b(this),$ui:null,opt:g};d.getListDefinition=function(){return b.Deferred(function(f){b().SPServices({operation:"GetList",listName:g.list,cacheXML:true,async:true,webURL:g.webURL,completefunc:function(r,a){var t=b(r.responseXML);if(a==="error")f.rejectWith(t,[r,a]);else t.SPMsgHasError()?f.rejectWith(t,[r,a]):f.resolveWith(t,[r,a])}})}).promise()};d.buildWidget=function(){return b.Deferred(function(f){d.getListDefinition().then(function(){var r=this,
a="",t=c.templates.filter("#filter_column").html();d.$ui=b(c.templates.filter("#filter_main_ui").html()).appendTo(d.$ele.empty().addClass("hasSPFilterPanel"));d.$list=r;b.each(d.opt.columns,function(n,i){var j=r.find("Field[DisplayName='"+i+"']"),m=t,k="",l={type:null};j.length||(j=r.find("Field[Name='"+i+"']"));if(j.length){l.Name=j.attr("Name");switch(j.attr("Type")){case "Choice":j.find("CHOICES CHOICE").each(function(p,q){k+=b.SPWidgets.fillTemplate(c.templates.filter("#filter_choice_field").html(),
{DisplayName:j.attr("DisplayName"),Name:j.attr("Name"),value:b(q).text()})});m=m.replace(/__COLUMN__UI__/,k);m=b.SPWidgets.fillTemplate(m,{DisplayName:j.attr("DisplayName"),type:"choice",Name:j.attr("Name")});break;case "Lookup":case "LookupMulti":l.type="lookup";l.list=j.attr("List");if(l.list==="Self")l.list=r.find("List").attr("Title");case "User":case "UserMulti":if(l.type===null)l.type="people";default:if(l.type===null)l.type="text";k=c.templates.filter("#filter_text_field").html();m=m.replace(/__COLUMN__UI__/,
k);m=b.SPWidgets.fillTemplate(m,b.extend(l,{DisplayName:j.attr("DisplayName"),Name:j.attr("Name"),tooltip:d.opt.textFieldTooltip}))}a+=m}});d.$ele.find("div.spwidget-filter-column-cntr").html(a);d.$ele.find("div.spwidget-type-lookup input").each(function(){var n=b(this);n.SPLookupField({list:n.data("spwidget_list"),template:'<div>{{Title}} <span class="spwidgets-item-remove">[x]</span></div>',listTemplate:"{{Title}}",allowMultiples:true,readOnly:false,filter:""});n.parent().find(".spwidget-tooltip").remove()});
d.$ele.find("div.spwidget-type-people input").each(function(){var n=b(this);n.pickSPUser({allowMultiple:true});n.parent().find(".spwidget-tooltip").remove()});d.opt.showFilterButton||d.opt.showFilterButtonTop?d.$ui.find("div.spwidget-filter-button-cntr").each(function(){var n=b(this),i=b();if(d.opt.showFilterButtonTop)i=i.add(n.clone(true)).prependTo(d.$ui);if(d.opt.showFilterButton)i=i.add(n);else n.remove();i.find("button[name='filter']").button({icons:{primary:"ui-icon-search"},label:d.opt.filterButtonLabel}).on("click",
c.onFilterButtonClick);i.find("button[name='reset']").button({icons:{primary:"ui-icon-arrowreturnthick-1-n"},text:false}).on("click",function(){c.doResetFilter(d);return this})}):d.$ui.find("div.spwidget-filter-button-cntr").remove();d.$ui.on("change.SPWigets.SPFilterPanel","select.spwidget-filter-type",c.onFilterTypeChange);d.opt.definedClass!==""&&d.$ui.on("change.SPWidgets.SPFilterPanel",".spwidget-filter-input",c.onFilterInputChange);b.isFunction(d.opt.onReady)&&d.opt.onReady.call(d.$ele,e);d.$ui.fadeIn().promise().then(function(){b(this).css("display",
"");f.resolve()});d.$ui.data("SPFilterPanelInst",d)}).fail(function(){d.$ele.html('<div class="ui-state-error">Unable to retrieve list information. '+this.SPGetMsgError()+"</div>");f.reject()})}).promise()};if(d.opt.ignoreKeywords&&!d.opt.ignoreKeywords instanceof RegExp)d.opt.ignoreKeywords=/Inst.opt.ignoreKeywords/i;d.buildWidget();return this})};c.onFilterInputChange=function(){var e=b(this),g=e.closest("div.spwidget-filter-value-input"),d=g.closest("div.spwidget-column");e=e.val();var f=g.closest("div.spwidget-filter").data("SPFilterPanelInst");
if(d.is(".spwidget-type-choice"))g.find(".spwidget-filter-input:checked").length||(e="");e!==""?d.addClass(f.opt.definedClass):d.removeClass(f.opt.definedClass);return this};c.onFilterTypeChange=function(){var e=b(this),g=e.closest("div.spwidget-column").find("div.spwidget-filter-value-cntr"),d=g.find(".spwidget-input");e=e.val();if(e==="IsNull"||e==="IsNotNull"){g.addClass("spwidget-disabled");d.attr("disabled","disabled")}else{g.removeClass("spwidget-disabled");d.removeAttr("disabled","disabled")}return this};
c.onFilterButtonClick=function(){var e=b(this).closest("div.spwidget-filter").data("SPFilterPanelInst"),g=null;if(b.isFunction(e.opt.onFilterClick)){g=c.getFilterValues(e);e.opt.onFilterClick.call(e.$ele,g)}return this};c.doResetFilter=function(e){if(b.isFunction(e.onReset))if(e.onReset.call(e.$ele,c.getFilterValues(e))===true)return e;e.$ui.find("div[data-spwidget_column_type='text'] input").val("").end().find("div[data-spwidget_column_type='choice'] input").prop("checked",false).end().find(".hasPickSPUser").pickSPUser("method",
"clear").end().find(".hasLookupSPField").SPLookupField("method","clear");e.opt.definedClass!==""&&e.$ui.find("."+e.opt.definedClass).removeClass(e.opt.definedClass);return e};c.getFilterValues=function(e){function g(r){return b.SPWidgets.getCamlLogical({type:"OR",values:r.values,onEachValue:function(a){return"<"+r.matchType+"><FieldRef Name='"+r.columnName+"' /><Value Type='Text'>"+b.SPWidgets.escapeXML(a)+"</Value></"+r.matchType+">"}})}var d={CAMLQuery:"",filters:{},count:0},f=[];e.$ui.find("div.spwidget-column").each(function(r,
a){var t=b(a),n=t.find(".spwidget-input"),i=n.attr("name"),j={columnName:i,matchType:t.find("select.spwidget-filter-type").val(),values:[],count:0,CAMLQuery:""};t=t.data("spwidget_column_type");if(j.matchType==="IsNull"||j.matchType==="IsNotNull"){j.CAMLQuery="<"+j.matchType+"><FieldRef Name='"+i+"' /></"+j.matchType+">";j.count+=1}else switch(t){case "choice":n.each(function(){var m=b(this),k=m.val();m.is(":checked")&&j.values.push(k)});if(j.values.length){j.count=j.values.length;j.CAMLQuery=g(j)}break;
case "lookup":case "people":(function(){var m=[];n.each(function(){var k=b(this);k=b.SPWidgets.parseLookupFieldValue(k.val());var l,p;l=0;for(p=k.length;l<p;l++)if(k[l].id){j.values.push(k[l].id+";#"+k[l].title);m.push(k[l].id)}});if(j.values.length){j.count=j.values.length;j.CAMLQuery=b.SPWidgets.getCamlLogical({type:"OR",values:m,onEachValue:function(k){return"<"+j.matchType+"><FieldRef Name='"+j.columnName+"' LookupId='True'/><Value Type='Lookup'>"+k+"</Value></"+j.matchType+">"}})}})();break;
case "text":String(b.trim(n.val())).length&&function(){var m=n.val().split(";"),k,l,p;k=0;for(l=m.length;k<l;k++){p=b.trim(m[k]);!e.opt.ignoreKeywords.test(p)&&p&&j.values.push(p)}j.CAMLQuery=g(j);j.count=j.values.length}()}if(j.count>0){f.push(j.CAMLQuery);d.count+=j.count;d.filters[i]=j}});if(d.count>1)d.CAMLQuery=b.SPWidgets.getCamlLogical({type:"AND",values:f});else if(d.count===1)d.CAMLQuery=f[0];return d};c.styleSheet="/** \n * Stylesheet for the Board widget\n * \n * BUILD: Paul:June 30, 2013 12:58 PM\n */\ndiv.spwidget-filter {\n    width: 100%;\n    position: relative;\n}\ndiv.spwidget-filter .spwidgets-lookup-cntr {\n    display: block;\n}\ndiv.spwidget-filter input[type='text'],\ndiv.spwidget-filter div.spwidget-type-choice div.spwidget-filter-value-input {\n    width: 97%;\n}\ndiv.spwidget-filter div.spwidget-column {\n    padding: .5em;\n    margin: .5em;\n    position: relative;\n    border-bottom: 1px solid  darkgray;\n    box-shadow: 1px 1px 1px 0 lightgray inset;\n}\ndiv.spwidget-filter div.spwidget-filter-type-cntr {\n    margin-right: 3%;\n    margin-top: 0.3em;\n    float: right;\n}\ndiv.spwidget-filter div.spwidget-filter-value-cntr {\n    margin-top: .5em;\n    width: 100%;\n}\n\ndiv.spwidget-filter div.spwidget-filter-value-cntr > label {\n    display: block;\n    padding: .2em;\n    font-size: 1.1em;\n    font-weight: bold;\n}\ndiv.spwidget-filter div.spwidget-column-dirty div.spwidget-filter-value-cntr > label {\n    color: #FF0000;\n}\ndiv.spwidget-filter .spwidget-tooltip {\n    display: block;\n    font-size: .8em;\n    font-style: italic;\n}\n\n/* LOOKUP FIELDS */\ndiv.spwidget-filter div.spwidgets-lookup-cntr div.spwidgets-lookup-selected > div.spwidgets-item {\n    display: block;\n    margin-left: 0px;\n}\n\n/* CHOICE FIELDS */\ndiv.spwidget-filter div.spwidget-type-choice div.spwidget-filter-value-input {\n    max-height: 6em;\n    overflow: auto;\n    -moz-appearance: textfield;\n    -webkit-appearance: textfield;\n    background-color: white;\n    background-color: -moz-field;\n    border: 1px solid  darkgray;\n    box-shadow: 1px 1px 1px 0 lightgray inset;\n    font: -moz-field;\n    font: -webkit-small-control;\n    padding: 2px 5px;\n}\ndiv.spwidget-filter div.spwidget-type-choice div.spwidget-filter-value-input > label {\n    display: block;\n    padding: .2em;\n}\n\n/** DISABLED COLUMN VALUE CONTAINER */\ndiv.spwidget-filter .spwidget-disabled {\n    -ms-filter: \"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)\";\n    filter: alpha(opacity=50);\n    opacity: 0.5;\n}\n\n/** Button container */\ndiv.spwidget-filter div.spwidget-filter-button-cntr {\n    padding: .5em 4%;\n    margin-top: .5em;\n    text-align: right;\n}\n\n";
c.htmlTemplate='<script type="text/html" id="filter_main_ui">\n    <div class="spwidget-filter" style="display: none;">\n        <div class="spwidget-filter-column-cntr"></div>\n        <div class="spwidget-filter-button-cntr">\n            <button type="button" class="spwidget-button" name=\'reset\'>Reset</button>\n            <button type="button" class="spwidget-button" name=\'filter\'>Filter</button>\n        </div>\n    </div>\n<\/script>\n<script type="text/html" id="filter_column">\n    <div class="spwidget-column spwidget-type-{{type}}" data-spwidget_column_type="{{type}}">\n        <div class="spwidget-filter-type-cntr" title="Match Type">\n            <select name="{{Name}}_type" class="spwidget-filter-type" tabindex="-1">\n                <option value="Contains" selected="selected">Contains</option>\n                <option value="Eq">Equal</option>\n                <option value="Neq">Not Equal</option>\n                <option value="IsNull">Is Blank</option> \n                <option value="IsNotNull">Is Not Blank</option> \n            </select>\n        </div>\n        <div class="spwidget-filter-value-cntr">\n            <label>{{DisplayName}}</label>\n            <div class="spwidget-filter-value-input">\n                __COLUMN__UI__\n            </div>\n        </div>\n    </div>\n<\/script>\n<script type="text/html" id="filter_text_field">\n    <input name="{{Name}}" title="{{DisplayName}}" type="text" value="" data-spwidget_list="{{list}}" class="spwidget-input spwidget-filter-input" />\n    <span class="spwidget-tooltip">{{tooltip}}</span>\n<\/script>\n<script type="text/html" id="filter_choice_field">\n    <label>\n        <input name="{{Name}}" title="{{DisplayName}}" type="checkbox" value="{{value}}" class="spwidget-input spwidget-filter-input" />\n        {{value}}\n    </label>\n<\/script>\n'})(h)})(jQuery);
